<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <title>EDS 430 – part6.2-testing-slides</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #767676;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #767676;  padding-left: 4px; }
    div.sourceCode
      { color: #545454; background-color: #fefefe; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #545454; } /* Normal */
    code span.al { color: #7928a1; } /* Alert */
    code span.an { color: #696969; } /* Annotation */
    code span.at { color: #a55a00; } /* Attribute */
    code span.bn { color: #7928a1; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #d91e18; } /* ControlFlow */
    code span.ch { color: #008000; } /* Char */
    code span.cn { color: #d91e18; } /* Constant */
    code span.co { color: #696969; } /* Comment */
    code span.cv { color: #696969; font-style: italic; } /* CommentVar */
    code span.do { color: #696969; font-style: italic; } /* Documentation */
    code span.dt { color: #7928a1; } /* DataType */
    code span.dv { color: #7928a1; } /* DecVal */
    code span.er { color: #7928a1; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #a55a00; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #696969; } /* Information */
    code span.kw { color: #d91e18; } /* Keyword */
    code span.op { color: #00769e; } /* Operator */
    code span.ot { color: #d91e18; } /* Other */
    code span.pp { color: #7928a1; } /* Preprocessor */
    code span.sc { color: #00769e; } /* SpecialChar */
    code span.ss { color: #008000; } /* SpecialString */
    code span.st { color: #008000; } /* String */
    code span.va { color: #a55a00; } /* Variable */
    code span.vs { color: #008000; } /* VerbatimString */
    code span.wa { color: #696969; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link href="../../site_libs/countdown-0.4.0/countdown.css" rel="stylesheet">
  <script src="../../site_libs/countdown-0.4.0/countdown.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="title-slide" class="slide level2 center" data-menu-title="Title Slide" data-background="#053660">
<h2></h2>
<p><span class="custom-title">EDS 430: Part 6.2</span></p>
<p><span class="custom-subtitle"><em>Testing</em></span></p>
<hr class="hr-teal">
<p><span class="custom-subtitle3">Week 2 | February 2<sup>nd</sup>, 2024</span></p>
</section>
<section id="testing" class="slide level2" data-menu-title="~~~ Testing ~~~" data-background="#047C90">
<h2></h2>
<div class="page-center vertical-center">
<p class="custom-subtitle bottombr">
<i class="fa-solid fa-file-code" title="a file with the code symbol, </>, on it" aria-label="file-code"></i> Testing
</p>
<p class="caption-text">
<em>Creating automated tests for your apps can save time and effort, ensuring that they continue working as expected.</em>
</p>
</div>
</section>
<section id="LO-testing" class="slide level2" data-menu-title="Learning Objectives - Testing">
<h2></h2>
<p><span class="slide-title"><i class="fa-solid fa-book-open" title="an open book" aria-label="book-open"></i> Learning Objectives for Testing</span></p>
<hr>
<p class="body-text-l teal-text bottombr">
After this section, you should:
</p>
<div class="fragment">
<p><span class="teal-text"><i class="fa-solid fa-angle-right" title="a bullet point" aria-label="angle-right"></i></span> understand some of the reasons why apps break and the benefit of having automated tests</p>
</div>
<div class="fragment">
<p><span class="teal-text"><i class="fa-solid fa-angle-right" title="a bullet point" aria-label="angle-right"></i></span> have a basic understanding of how to use the <code>{shinytest2}</code> package to create regression tests</p>
</div>
<div class="fragment">
<p><span class="teal-text"><i class="fa-solid fa-angle-right" title="a bullet point" aria-label="angle-right"></i></span> know how to rerun tests</p>
</div>
<div class="fragment">
<p><span class="teal-text"><i class="fa-solid fa-angle-right" title="a bullet point" aria-label="angle-right"></i></span> know how to update tests</p>
</div>
<div class="fragment">
<p><span class="teal-text"><i class="fa-solid fa-angle-right" title="a bullet point" aria-label="angle-right"></i></span> TBD</p>
</div>
<div class="fragment">
<p class="body-text-l teal-text topbr">
Packages introduced:
</p>
</div>
<div class="fragment">
<p><span class="teal-text"><i class="fa-solid fa-box-open" title="an open box" aria-label="box-open"></i></span> <code>{shinytest2}</code>: provides tools for creating and running automated tests on Shiny applications</p>
</div>
</section>
<section id="shiny-workflow" class="slide level2" data-menu-title="Shiny workflow">
<h2></h2>
<p><span class="slide-title2">This workflow should look a bit familiar . . .</span></p>
<hr>
<ol type="1">
<li>Add / adjust some reactivity</li>
<li>Click “Run App”</li>
<li>Manually experiment with (i.e.&nbsp;informally test) the new feature to see if it works</li>
<li>Rinse &amp; repeat</li>
</ol>
<p><br></p>
<div class="fragment">
<p>But what if you have 20 apps?</p>
<p><br></p>
</div>
<div class="fragment">
<p>Or many team members?</p>
<p><br></p>
</div>
<div class="fragment">
<p><strong>It becomes increasingly challenging to remember all the features you need to test, or how each works.</strong> Things can also get lost in translation with manual testing (e.g.&nbsp;can you explain to your coworker(s) <em>all</em> of your app’s features and make sure that they manually test it properly?).</p>
<div class="footer">
<p>Slide adapted from Barret Schloerke’s rstudio::conf(2022) talk, <a href="https://www.youtube.com/watch?v=DMgAW4m5aTI"><code>{shinytest2}</code>: Unit testing for Shiny applications</a></p>
</div>
</div>
</section>
<section id="why-test" class="slide level2" data-menu-title="Why test?">
<h2></h2>
<p><span class="slide-title">Why test our Shiny apps?</span></p>
<hr>
<p>It’s almost inevitable that our app(s) will (at some point) break – there are lots of reasons why this happens, but to name a few:</p>
<div class="fragment">
<p class="body-text-s topbr">
<span class="teal-text"><i class="fa-solid fa-angle-right" title="a bullet point" aria-label="angle-right"></i></span> <strong>an upgraded R package(s)</strong> has a different behavior (this includes <code>{shiny}</code>) – this is especially relevant for those apps hosted on servers, where server software (including packages) may be updated by system administrators
</p>
</div>
<div class="fragment">
<p class="body-text-s topbr">
<span class="teal-text"><i class="fa-solid fa-angle-right" title="a bullet point" aria-label="angle-right"></i></span> <strong>you make changes to your app</strong> (e.g.&nbsp;add new features, refactor code)
</p>
</div>
<div class="fragment">
<p class="body-text-s topbr">
<span class="teal-text"><i class="fa-solid fa-angle-right" title="a bullet point" aria-label="angle-right"></i></span> <strong>an external data source stops working</strong> or returns data in a different format than that expected by your app
</p>
</div>
<div class="fragment">
<p><br></p>
<p>Manually testing Shiny apps is takes a lot of time and effort, is often inconsistent, and doesn’t scale well (e.g.&nbsp;for larger apps, many apps, or for larger teams of collaborators).</p>
</div>
<div class="fragment">
<p><br></p>
<p><strong>It can save a lot of time and headache (for you <em>and</em> your collaborators) to have an automated system that checks if your app is working as expected.</strong></p>
</div>
</section>
<section class="slide level2">

<p>Different levels/types of tests:</p>
<ul>
<li><strong>Unit tests</strong> test individual functions, components, modules of your app (e.g.&nbsp;can your app handle the expected data? does your user see what you expect them to see?)</li>
<li><strong>Integration tests</strong> test how your app works with external systems (e.g.&nbsp;APIs)</li>
</ul>
<p><a href="https://www.atlassian.com/continuous-delivery/software-testing/types-of-software-testing" class="uri">https://www.atlassian.com/continuous-delivery/software-testing/types-of-software-testing</a></p>
</section>
<section id="shinytest2" class="slide level2" data-menu-title="{shinytest2}">
<h2></h2>
<p><span class="slide-title">Enter the <code>{shinytest2}</code> package</span></p>
<hr>
<p>The <a href="https://rstudio.github.io/shinytest2/articles/shinytest2.html"><code>{shinytest2}</code> package</a> provides useful tools for <strong>unit testing</strong> Shiny apps. This process is also known as <a href="https://en.wikipedia.org/wiki/Regression_testing"><strong>regression testing</strong></a>, since we’ll be testing existing app behavior for consistency over time (we don’t want app behavior to regress).</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><br></p>
<p class="body-text">
From the <code>{shinytest2}</code> documentation:
</p>
<p class="body-text-s quote-text-bg">
“<em><code>{shinytest2}</code> uses <code>{testthat}</code>’s snapshot-based testing strategy. The first time it runs a set of tests for an application, it performs some scripted interactions with the app and takes one or more snapshots of the application’s state. These snapshots are saved to disk so that future runs of the tests can compare their results to them.</em>”
</p>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/part6/shinytest2-hex.png" style="width:60.0%" alt="A hex that's split down the middle horizontally. The top half is the blue Shiny hex and the bottom half looks like the red {testthat} hex, except it reads 'test2'."></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<p><span class="body-text-s">With <code>{shinytest2}</code>, we can interact with our app via the “app recorder” and our test code will be automatically generated for us. We can then rerun tests to check for consistency as we iterate on our app.</span></p>
<div class="footer">
<p><code>{shinytest2}</code> uses <a href="https://rstudio.github.io/chromote/"><code>{chromote}</code></a> to render your app in a headless <a href="https://www.chromium.org/chromium-projects/">Chromium browser</a> – by default, it uses Google Chrome, so make sure you have that installed on your OS!</p>
</div>
</section>
<section id="setting-stage" class="slide level2" data-menu-title="Setting the stage">
<h2></h2>
<p><span class="slide-title">Let’s imagine . . .</span></p>
<hr>
<p><span class="body-text-s">Your boss has tasked you with building a Shiny app, and asks that you begin with a feature that greets users by name. <strong>Create a new folder, <code>testing-app/</code>, in your GitHub repo and add the following files:</strong></span></p>
<!-- --- -->
<!-- ##  {#starting-app data-menu-title="Starting app"} -->
<!-- [Let's start with the following app]{.slide-title} -->
<!-- <hr> -->
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1"><code>global.R</code></a></li><li><a href="#tabset-1-2"><code>ui.R</code></a></li><li><a href="#tabset-1-3"><code>server.R</code></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>testing-app/global.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># load libraries ----</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(shiny)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>testing-app/ui.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="co"># Feature 1 ------------------------------------------------------------------</span></span>
<span id="cb2-4"><a href="#cb2-4"></a></span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="fu">h3</span>(<span class="st">"Feature 1"</span>),</span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="co"># fluidRow (Feature 1: greeting) ----</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>  <span class="fu">fluidRow</span>(</span>
<span id="cb2-9"><a href="#cb2-9"></a></span>
<span id="cb2-10"><a href="#cb2-10"></a>    <span class="co"># greeting sidebarLayout ----</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb2-12"><a href="#cb2-12"></a></span>
<span id="cb2-13"><a href="#cb2-13"></a>      <span class="co"># greeting sidebarPanel ----</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb2-15"><a href="#cb2-15"></a></span>
<span id="cb2-16"><a href="#cb2-16"></a>        <span class="fu">textInput</span>(<span class="at">inputId =</span> <span class="st">"name_input"</span>,</span>
<span id="cb2-17"><a href="#cb2-17"></a>                  <span class="at">label =</span> <span class="st">"What is your name?"</span>),</span>
<span id="cb2-18"><a href="#cb2-18"></a></span>
<span id="cb2-19"><a href="#cb2-19"></a>        <span class="fu">actionButton</span>(<span class="at">inputId =</span> <span class="st">"greeting_button_input"</span>,</span>
<span id="cb2-20"><a href="#cb2-20"></a>                     <span class="at">label =</span> <span class="st">"Greet"</span>),</span>
<span id="cb2-21"><a href="#cb2-21"></a></span>
<span id="cb2-22"><a href="#cb2-22"></a>      ), <span class="co"># </span><span class="re">END</span><span class="co"> greeting sidebarPanel</span></span>
<span id="cb2-23"><a href="#cb2-23"></a></span>
<span id="cb2-24"><a href="#cb2-24"></a>      <span class="co"># greeting mainPanel ----</span></span>
<span id="cb2-25"><a href="#cb2-25"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb2-26"><a href="#cb2-26"></a></span>
<span id="cb2-27"><a href="#cb2-27"></a>        <span class="fu">textOutput</span>(<span class="at">outputId =</span> <span class="st">"greeting_output"</span>),</span>
<span id="cb2-28"><a href="#cb2-28"></a></span>
<span id="cb2-29"><a href="#cb2-29"></a>      ) <span class="co"># </span><span class="re">END</span><span class="co"> greeting mainPanel</span></span>
<span id="cb2-30"><a href="#cb2-30"></a></span>
<span id="cb2-31"><a href="#cb2-31"></a>    ) <span class="co"># </span><span class="re">END</span><span class="co"> greeting sidebarLayout</span></span>
<span id="cb2-32"><a href="#cb2-32"></a></span>
<span id="cb2-33"><a href="#cb2-33"></a>  ), <span class="co"># </span><span class="re">END</span><span class="co"> fluidRow (Feature 1: greeting)</span></span>
<span id="cb2-34"><a href="#cb2-34"></a>  </span>
<span id="cb2-35"><a href="#cb2-35"></a>) <span class="co"># </span><span class="re">END</span><span class="co"> fluidPage </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div id="tabset-1-3">
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>testing-app/server.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb3-2"><a href="#cb3-2"></a>  </span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="co"># Feature 1 ------------------------------------------------------------------</span></span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a>  output<span class="sc">$</span>greeting_output <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a>    <span class="fu">req</span>(input<span class="sc">$</span>greeting_button_input) <span class="co"># req(): textOutput doesn't appear until button is first pressed</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>    <span class="fu">paste0</span>(<span class="st">"Hello "</span>, <span class="fu">isolate</span>(input<span class="sc">$</span>name_input), <span class="st">"!"</span>) <span class="co"># isolate(): prevents textOutput from updating until button is pressed again</span></span>
<span id="cb3-9"><a href="#cb3-9"></a></span>
<span id="cb3-10"><a href="#cb3-10"></a>  }) </span>
<span id="cb3-11"><a href="#cb3-11"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="run-ft1-app" class="slide level2" data-menu-title="Run the app">
<h2></h2>
<p><span class="slide-title3">Manually test your app and make note of how it works</span></p>
<hr>

<img data-src="images/part6/ft1-explore.gif" style="width:80.0%" class="r-stretch quarto-figure-center"><p><br></p>
<div class="center-text">
<p>Let’s say that you are satisfied with your work (yay!) and are now ready to write some automated tests to ensure consistent behavior as you continue to build out additional features.</p>
</div>
</section>
<section id="ft1-assertions" class="slide level2" data-menu-title="Feature 1 assertions">
<h2></h2>
<p><span class="slide-title">Write down your assertions</span></p>
<hr>
<p><span class="body-text-s">Before we dive into writing any tests, it’s super helpful to inspect your app and, <em>importantly</em> jot down (in your own words) any <strong>assertions</strong>. <a href="https://en.wikipedia.org/wiki/Test_assertion">Test assertions</a> are expressions that contain testable logic to evaluate whether an actual result / behavior is as expected.</span></p>
<p><br></p>
<div class="fragment">
<p>I find it helpful to frame assertions as: (1) what <strong>actions</strong> can be taken? and (2) what are the <strong>expected outputs / behaviors</strong> that result from those actions?</p>
<p><br></p>
<p><span class="teal-text body-text-l"><strong>For example:</strong></span></p>
<table>
<colgroup>
<col style="width: 62%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th>Action(s)</th>
<th>Expectation(s)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Type [some text value] in text box &gt; click Greet button</td>
<td>Greeting output is “Hello [some text value]!”</td>
</tr>
<tr class="even">
<td>Type [some text value] in text box &gt; click Greet button &gt; type [some other text value] in text box &gt; click Greet button</td>
<td>Greeting output is “Hello [some text value]!”, then updates to “Hello [some other text value]!”</td>
</tr>
<tr class="odd">
<td>Click Greet button</td>
<td>Greeting output is “Hello !”</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="assertions-note" class="slide level2" data-menu-title="A note on assertions">
<h2></h2>
<p><span class="slide-title">One more important note (actually, a few)</span></p>
<hr>
<p><br></p>
<div class="center-text">
<p>As much as you try, <strong>testing will never be exhaustive</strong>. You can only test for scenarios that you think of.</p>
</div>
<p><br></p>
<div class="fragment">
<div class="center-text">
<p>The goal is to <strong>put yourself in the shoes of a user</strong>, and test scenarios that you think your users will encounter. If you test those use-cases, you’ll cover the majority of expectations.</p>
</div>
<p><br></p>
</div>
<div class="fragment">
<div class="center-text">
<p>As users interact with your app, <strong>they’ll stumble upon and reveal use-cases / scenarios that you hadn’t tested for</strong>…and you can update your app / write tests accordingly.</p>
</div>
<p><br></p>
</div>
<div class="fragment">
<div class="center-text">
<p>Over time, <strong>your ability to identify both how users will interact with your app <em>and</em> what to test will improve</strong>.</p>
</div>
</div>
</section>
<section id="testing-procedure" class="slide level2" data-menu-title="Testing procedure">
<h2></h2>
<p><span class="slide-title3">Turn written assertions into actual tests using the <code>{shinytest2}</code> workflow</span></p>
<hr>
<p><br></p>
<p><span class="teal-text"><strong>Generally speaking, that workflow looks something like this:</strong></span></p>
<p><br></p>
<div class="fragment">
<p><span class="teal-text"><strong>(1)</strong></span> Run <code>shinytest2::record_test(&lt;app-directory&gt;)</code> in your Console to launch the app recorder in a browser window</p>
<p><br></p>
</div>
<div class="fragment">
<p><span class="teal-text"><strong>(2)</strong></span> Interact with your application and tell the recorder to make an expectation of the app’s state, which will record <code>input</code>, <code>output</code>, and <code>exported</code> values.</p>
<p><br></p>
</div>
<div class="fragment">
<p><span class="teal-text"><strong>(3)</strong></span> Give your test a unique name and quit the recorder to save and execute your tests</p>
<p><br></p>
</div>
<div class="fragment">
<div class="center-text body-text-m">
<p>We’ll repeat this workflow to write tests for each of our three assertions.</p>
</div>
</div>
</section>
<section id="chromote-timeout" class="slide level2" data-menu-title="chromote time out">
<h2></h2>
<p><span class="slide-title2">FYI (a warning about chromote time outs)</span></p>
<hr>
<p><br> <br> <br></p>
<p>If you receive the following error message after running, <code>shinytest2::record_test("testing-app")</code>, you’ll need to restart R:</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Caused by error<span class="sc">:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span> Chromote<span class="sc">:</span> timed out waiting <span class="cf">for</span> response to command Target.createTarget</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>It’s a pretty annoying error, which seems to be an <a href="https://github.com/rstudio/chromote/issues/94">ongoing issue</a> with <code>{chromote}</code>. R may be slow to restart (and I’ve had to restart numerous times <i class="fa-solid fa-face-sad-tear" title="a sad face with a tear" aria-label="face-sad-tear"></i>).</p>
</section>
<section id="ft1-test1" class="slide level2" data-menu-title="Feature 1, test 1">
<h2></h2>
<p><span class="slide-title">Let’s test our first assertion . . .</span></p>
<hr>
<p>…which is that when a user types [some text value] into the text box and clicks the Greet button (<strong>i.e.&nbsp;the actions</strong>), the greeting output will return <code>Hello [some text value]!</code> (<strong>i.e.&nbsp;the expectation</strong>). We’ll substitute a known value (e.g.&nbsp;“Sam”) for [some text value] in our test.</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/part6/one-name-greeting.gif" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><span class="teal-text"><strong>Steps:</strong></span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(1)</strong></span> Run <code>shinytest2::record_test("testing-app")</code> in the Console</span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(2)</strong></span> Type <code>Sam</code> into the text box &gt; click the Greet button &gt; click Expect Shiny Values</span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(3)</strong></span> Give the test a unique name (e.g.&nbsp;<code>one-name-greeting</code>) &gt; click Save test and exit</span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(4)</strong></span> The test recorder will quit, and your test will automatically execute (it should pass!)</span></p>
</div>
</div>
<div class="center-text body-text-s">
<p>Notice that your actions (e.g.&nbsp;typing text, clicking the button) are recorded as code in the right-hand panel – this is your test code, and it’ll be saved when you quit the recorder.</p>
</div>
</section>
<section id="test-auto-executes" class="slide level2" data-menu-title="Tests auto execute">
<h2></h2>
<p><span class="slide-title2">Your test should automatically run (and pass!)</span></p>
<hr>
<p>After quitting the test recorder, the following will happen:</p>
<ul>
<li><span class="body-text-s">a test script will be saved in <code>testing-app/tests/testthat/test-shinytest2.R</code></span></li>
<li><span class="body-text-s">if you’re running in the RStudio IDE, <code>test-shinytest2.R</code> will automatically open in the editor</span></li>
<li><span class="body-text-s"><code>shinytest2::test_app()</code> is run behind the scenes to execute the test script</span></li>
</ul>
<p>You should see the following in your RStudio Console:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>• Saving test runner<span class="sc">:</span> tests<span class="sc">/</span>testthat.R</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>• Saving test file<span class="sc">:</span> tests<span class="sc">/</span>testthat<span class="sc">/</span>test<span class="sc">-</span>shinytest2.R</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>✔ Adding <span class="st">'shinytest2::load_app_env()'</span> to <span class="st">'tests/testthat/setup-shinytest2.R'</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>• Running recorded test<span class="sc">:</span> tests<span class="sc">/</span>testthat<span class="sc">/</span>test<span class="sc">-</span>shinytest2.R</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>✔ <span class="sc">|</span> F W  S  OK <span class="sc">|</span> Context</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>✔ <span class="sc">|</span>   <span class="dv">2</span>      <span class="dv">1</span> <span class="sc">|</span> shinytest2 [<span class="fl">1.4</span>s]                                                         </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>───────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">Warning</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">7</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> one<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>Adding new file snapshot<span class="sc">:</span> <span class="st">'tests/testthat/_snaps/one-name-greeting-001_.png'</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">Warning</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">7</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> one<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>Adding new file snapshot<span class="sc">:</span> <span class="st">'tests/testthat/_snaps/one-name-greeting-001.json'</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>───────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>══ Results ════════════════════════════════════════════════════════════════════════════════</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>Duration<span class="sc">:</span> <span class="fl">1.5</span> s</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>[ FAIL <span class="dv">0</span> <span class="sc">|</span> WARN <span class="dv">2</span> <span class="sc">|</span> SKIP <span class="dv">0</span> <span class="sc">|</span> PASS <span class="dv">1</span> ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="test-folder" class="slide level2" data-menu-title="Explore the tests/ folder">
<h2></h2>
<p><span class="slide-title">Understanding the contents of <code>tests/</code></span></p>
<hr>
<p>The first time you record a test, <code>{shinytest2}</code> generates number of directories / subdirectories, along with a bunch of files. The next few slides explain these in more detail.</p>
<p><br></p>
<p>After creating your first test, your repo structure should look something like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" data-code-line-numbers="false"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>├── testing-app/                                  </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>│   └── global.R                     </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>│   └── ui.R                         </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>│   └── server.R                      </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>│   └── tests/                    # generated the first time you record and save a test    </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>│      └── testthat.R             # see note below</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>│      └── testthat/     </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>│         └── setup-shinytest2.R  # see note below</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>│         └── test-shinytest2.R   # see slide 15</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>│         └── snaps/               </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>│            └── shinytest2/      </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>│               └── *001.json     # see slide X</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>│               └── *001_.png     # see slide X </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><span class="body-text-s"><code>testthat.R</code>: includes the code, <code>shinytest2::test_app()</code>, which is executed when you click the <strong>Run Tests</strong> button in RStudio</span></li>
<li><span class="body-text-s"><code>setup-shinytest2.R</code>: includes the code, <code>shinytest2::load_app_env()</code>, which loads any application support files (e.g.&nbsp;<code>global.R</code> and / or anything inside <code>R/</code>) into the testing environment</span></li>
</ul>
</section>
<section id="test-shinytest2" class="slide level2" data-menu-title="The test file">
<h2></h2>
<p><span class="slide-title"><code>test-shinytest2.R</code> (test code)</span></p>
<hr>
<p><span class="body-text-s">All tests will be saved to <code>tests/testthat/test-shinytest2.R</code>. Yours should look similar to the code below (sans annotations). You may have a different viewport height / width (depending on the size of your viewport when you recorded your test), and if you mistyped / deleted any characters in the textInput, you’ll see multiple <code>app$set_inputs()</code> statements, reflecting these actions:</span></p>
<p><br></p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>testing-app/tests/testthat/test-shinytest2.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">library</span>(shinytest2)</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co"># runs our test</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: one-name-greeting"</span>, {</span>
<span id="cb7-5"><a href="#cb7-5"></a>  </span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="co"># start Shiny app in a new R session along with chromote's headless browser that's used to simulate user actions</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"one-name-greeting"</span>, <span class="at">height =</span> <span class="dv">838</span>, <span class="at">width =</span> <span class="dv">1298</span>)</span>
<span id="cb7-8"><a href="#cb7-8"></a>  </span>
<span id="cb7-9"><a href="#cb7-9"></a>  <span class="co"># set the textInput (with Id `name_input`) to the value `Sam`</span></span>
<span id="cb7-10"><a href="#cb7-10"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Sam"</span>)</span>
<span id="cb7-11"><a href="#cb7-11"></a>  </span>
<span id="cb7-12"><a href="#cb7-12"></a>  <span class="co"># click the actionButton (with Id `greeting_button_input`)</span></span>
<span id="cb7-13"><a href="#cb7-13"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb7-14"><a href="#cb7-14"></a>  </span>
<span id="cb7-15"><a href="#cb7-15"></a>  <span class="co"># save the expected input, output, and export values to a JSON snapshot and generates a debug screenshot of the app</span></span>
<span id="cb7-16"><a href="#cb7-16"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>()</span>
<span id="cb7-17"><a href="#cb7-17"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="snaps" class="slide level2" data-menu-title="The _snaps/ folder">
<h2></h2>
<p><span class="slide-title">The <code>snaps/</code> folder</span></p>
<hr>
<p><span class="body-text-s">When <code>shinytest2::test_app()</code> runs your test code (<code>test-shinytest2.R</code>), it plays back the specified actions (e.g.&nbsp;setting the textInput to <code>Sam</code>, then clicking the Greet button), and records your application’s resulting state as a snapshot. Snapshots are saved to the <code>tests/testthat/shinytest2/_snaps/</code> folder. You should see two different snapshot files:</span></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="center-text body-text-s">
<p><code>one-name-greeting-001_.png</code>, a screenshot of the app when <code>app$expect_values()</code> was called:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/part6/one-name-greeting.png" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="center-text body-text-s">
<p><code>one-name-greeting-001.json</code>, a <a href="https://www.json.org/json-en.html">JSON</a> representation of the state of the app when <code>app$expect_values()</code> was called:</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource json number-lines code-with-copy"><code class="sourceCode json"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">{</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="dt">"input"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>    <span class="dt">"greeting_input"</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>    <span class="dt">"name_input"</span><span class="fu">:</span> <span class="st">"Sam"</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="fu">},</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="dt">"output"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>    <span class="dt">"greeting_output"</span><span class="fu">:</span> <span class="st">"Hello Sam!"</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="fu">},</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="dt">"export"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-10"><a href="#cb8-10"></a></span>
<span id="cb8-11"><a href="#cb8-11"></a>  <span class="fu">}</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="footer">
<p>We don’t have any exported values in our app, and we won’t be covering those here. Read more about exported values in the <a href="https://rstudio.github.io/shinytest2/articles/in-depth.html#exported-values"><code>{shinytest2}</code> documentation</a>.</p>
</div>
</section>
<section id="test-recap" class="slide level2" data-menu-title="Test recap">
<h2></h2>
<p><span class="slide-title">A quick recap of our test files</span></p>
<hr>
<ul>
<li><strong>You can think of your test as a <em>recipe</em> for <code>{shinytest2}</code> to follow to simulate user actions (i.e.&nbsp;inputs).</strong>
<ul>
<li><span class="body-text-s">These simulations are performed programmatically whenever you click <strong>Run Test</strong>.</span></li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li><strong>The JSON file defines your test’s expected outputs given known inputs.</strong>
<ul>
<li><span class="body-text-s">When you rerun your test, the same user actions (inputs) are simulated and the resulting outputs are compared against prior snapshots. We expect the resulting outputs to be the same each time. If the resulting outputs differ from our expectations, the test will fail.</span></li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><strong>The screenshot (<code>*_.png</code> file) can be used to visually inspect your app’s state at the time of your test.</strong>
<ul>
<li><span class="body-text-s">The <code>*_.png</code> file differs from a <code>*.png</code> file (which we did not capture). <code>*.png</code> files are screenshots of the application from <code>app$expect_screenshot()</code> (i.e.&nbsp;by clicking <em>Expect screenshot</em> in the app recorder), which you can use to ensure that the visual state of the application does not change. If subsequent screenshots differ (even by just a pixel!), your test will fail. This type of testing is quite brittle, and we won’t be covering it further.</span></li>
</ul></li>
</ul>
</div>
<div class="fragment">
<div class="center-text teal-text">
<p><strong>All of the above files should be tracked with <code>git</code>.</strong></p>
</div>
<!-- (ignore any `_.new.png` files) -->
</div>
</section>
<section id="rerun-tests" class="slide level2" data-menu-title="Rerun the test">
<h2></h2>
<p><span class="slide-title">Rerun your test</span></p>
<hr>
<p>Rerun your test by clicking on the <strong>Run Tests</strong> button, which is visible when <code>test-shinytest2.R</code> is open. They should all still pass (we haven’t changed anything since our first test run)!</p>

<img data-src="images/part6/rerun-test.png" style="width:100.0%" class="r-stretch quarto-figure-center"></section>
<section id="test-other-assertions" class="slide level2" data-menu-title="Test remaining assertions">
<h2></h2>
<p><span class="slide-title">Test our remaining assertions</span></p>
<hr>
<p><br> <br> <br></p>
<table>
<colgroup>
<col style="width: 56%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th>Action(s)</th>
<th>Expectation(s)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><i class="fa-solid fa-square-check" title="a checked box" aria-label="square-check"></i> Type [some text value] in text box &gt; click Greet button</td>
<td>Greeting output is “Hello [some text value]!”</td>
</tr>
<tr class="even">
<td><i class="fa-solid fa-square" title="an unchecked box" aria-label="square"></i> Type [some text value] in text box &gt; click Greet button &gt; type [some other text value] in text box &gt; click Greet button</td>
<td>Greeting output is “Hello [some text value]!”, then updates to “Hello [some other text value]!”</td>
</tr>
<tr class="odd">
<td><i class="fa-solid fa-square" title="an unchecked box" aria-label="square"></i> Click Greet button</td>
<td>Greeting output is “Hello !”</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_003d4944" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:2em;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="feature1-complete-tests" class="slide level2" data-menu-title="All feature 1 tests">
<h2></h2>
<p><span class="slide-title2"><code>test-shinytest2.R</code> should now look like this:</span></p>
<hr>
<p><span class="body-text-s">Or at least fairly close to this (maybe you chose different names to test with or had a different viewport size):</span></p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>testing-app/tests/testthat/test-shinytest2.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">library</span>(shinytest2)</span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: one-name-greeting"</span>, {</span>
<span id="cb9-4"><a href="#cb9-4"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"one-name-greeting"</span>, <span class="at">height =</span> <span class="dv">1335</span>, <span class="at">width =</span> <span class="dv">1126</span>)</span>
<span id="cb9-5"><a href="#cb9-5"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Sam"</span>)</span>
<span id="cb9-6"><a href="#cb9-6"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb9-7"><a href="#cb9-7"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>()</span>
<span id="cb9-8"><a href="#cb9-8"></a>})</span>
<span id="cb9-9"><a href="#cb9-9"></a></span>
<span id="cb9-10"><a href="#cb9-10"></a></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: consecutive-name-greeting"</span>, {</span>
<span id="cb9-12"><a href="#cb9-12"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"consecutive-name-greeting"</span>, <span class="at">height =</span> <span class="dv">961</span>, <span class="at">width =</span> <span class="dv">1322</span>)</span>
<span id="cb9-13"><a href="#cb9-13"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Sam"</span>)</span>
<span id="cb9-14"><a href="#cb9-14"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb9-15"><a href="#cb9-15"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>()</span>
<span id="cb9-16"><a href="#cb9-16"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Kat"</span>)</span>
<span id="cb9-17"><a href="#cb9-17"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb9-18"><a href="#cb9-18"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>()</span>
<span id="cb9-19"><a href="#cb9-19"></a>})</span>
<span id="cb9-20"><a href="#cb9-20"></a></span>
<span id="cb9-21"><a href="#cb9-21"></a></span>
<span id="cb9-22"><a href="#cb9-22"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: no-name-greeting"</span>, {</span>
<span id="cb9-23"><a href="#cb9-23"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"no-name-greeting"</span>, <span class="at">height =</span> <span class="dv">837</span>, <span class="at">width =</span> <span class="dv">1294</span>)</span>
<span id="cb9-24"><a href="#cb9-24"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb9-25"><a href="#cb9-25"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>()</span>
<span id="cb9-26"><a href="#cb9-26"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="center-text body-text-s">
<p>You can rerun all your tests at once by clicking the <strong>Run Tests</strong> button again (they should all pass!).</p>
</div>
</section>
<section id="improve-feature1" class="slide level2" data-menu-title="Improving feature 1 functionality">
<h2></h2>
<p><span class="slide-title2">Your boss requests an improvement on feature 1</span></p>
<hr>
<p><span class="body-text-s">Your boss is excited to see your progress, but would love to see an informative message pop up when a user clicks the Greet button without first typing in a name (currently, clicking the Greet button without typing a name will return “Hello !”… which is a bit odd). You make the following update to your app:</span></p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>testing-app/server.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb10-2"><a href="#cb10-2"></a>  </span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="co"># Feature 1 ------------------------------------------------------------------</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="co"># wait for user to click the Greet button before returning the message</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="fu">observe</span>({</span>
<span id="cb10-6"><a href="#cb10-6"></a>    </span>
<span id="cb10-7"><a href="#cb10-7"></a>    <span class="co"># if the user does not type anything, return the message, "Please type a name, then click the Greet button."</span></span>
<span id="cb10-8"><a href="#cb10-8"></a>    <span class="cf">if</span> (<span class="fu">nchar</span>(input<span class="sc">$</span>name_input) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb10-9"><a href="#cb10-9"></a>      output<span class="sc">$</span>greeting_output <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb10-10"><a href="#cb10-10"></a>        <span class="st">"Please type a name, then click the Greet button."</span></span>
<span id="cb10-11"><a href="#cb10-11"></a>      })</span>
<span id="cb10-12"><a href="#cb10-12"></a>      </span>
<span id="cb10-13"><a href="#cb10-13"></a>      <span class="co"># if the user does type a name, return the greeting, "Hello [name]!"</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>    } <span class="cf">else</span> {</span>
<span id="cb10-15"><a href="#cb10-15"></a>      output<span class="sc">$</span>greeting_output <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb10-16"><a href="#cb10-16"></a>        <span class="fu">paste0</span>(<span class="st">"Hello "</span>, <span class="fu">isolate</span>(input<span class="sc">$</span>name_input), <span class="st">"!"</span>)</span>
<span id="cb10-17"><a href="#cb10-17"></a>      })</span>
<span id="cb10-18"><a href="#cb10-18"></a>    }</span>
<span id="cb10-19"><a href="#cb10-19"></a>  }) <span class="sc">|&gt;</span></span>
<span id="cb10-20"><a href="#cb10-20"></a>    </span>
<span id="cb10-21"><a href="#cb10-21"></a>    <span class="co"># </span><span class="al">TODO</span><span class="co">: add description here</span></span>
<span id="cb10-22"><a href="#cb10-22"></a>    <span class="fu">bindEvent</span>(input<span class="sc">$</span>greeting_button_input)</span>
<span id="cb10-23"><a href="#cb10-23"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="no-name-greeting-breaks" class="slide level2" data-menu-title="Your test breaks!">
<h2></h2>
<p><span class="slide-title">Rerun your tests after making your update</span></p>
<hr>
<p>Our first two tests pass, but <strong>the third one failed</strong> <i class="fa-solid fa-face-frown" title="a frowning face" aria-label="face-frown"></i>. You’ll see something like this to start:</p>

<img data-src="images/part6/failed-no-name-greeting.png" style="width:100.0%" class="r-stretch quarto-figure-center"><div class="center-text">
<p>Click on the <strong>Output tab</strong> for more information on why the test failed (see next slide).</p>
</div>
</section>
<section id="output-tab" class="slide level2" data-menu-title="Output tab">
<h2></h2>
<p><span class="slide-title2">The Output tab tells us what caused our test to fail</span></p>
<hr>
<p><span class="body-text-s">There’s a lot of helpful information here, but lines 6-7 tell us that our <code>no-name-greeting</code> test failed, while lines 17-27 here tell us exactly what changed:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" data-code-line-numbers="6-7,17-27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="sc">==</span><span class="er">&gt;</span> Testing R file using <span class="st">'testthat'</span></span>
<span id="cb11-2"><a href="#cb11-2"></a></span>
<span id="cb11-3"><a href="#cb11-3"></a>Loading required package<span class="sc">:</span> shiny</span>
<span id="cb11-4"><a href="#cb11-4"></a>[ FAIL <span class="dv">1</span> <span class="sc">|</span> WARN <span class="dv">1</span> <span class="sc">|</span> SKIP <span class="dv">0</span> <span class="sc">|</span> PASS <span class="dv">3</span> ]</span>
<span id="cb11-5"><a href="#cb11-5"></a></span>
<span id="cb11-6"><a href="#cb11-6"></a>── <span class="fu">Failure</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">25</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> no<span class="sc">-</span>name<span class="sc">-</span>greeting ──</span>
<span id="cb11-7"><a href="#cb11-7"></a>Snapshot of <span class="st">`</span><span class="at">file</span><span class="st">`</span> to <span class="st">'shinytest2/no-name-greeting-001.json'</span> has changed</span>
<span id="cb11-8"><a href="#cb11-8"></a>Run testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="st">'shinytest2/'</span>) to review changes</span>
<span id="cb11-9"><a href="#cb11-9"></a>Backtrace<span class="sc">:</span></span>
<span id="cb11-10"><a href="#cb11-10"></a>    ▆</span>
<span id="cb11-11"><a href="#cb11-11"></a> <span class="fl">1.</span> └─app<span class="sc">$</span><span class="fu">expect_values</span>() at test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">25</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb11-12"><a href="#cb11-12"></a> <span class="fl">2.</span>   └─shinytest2<span class="sc">:::</span><span class="fu">app_expect_values</span>(...)</span>
<span id="cb11-13"><a href="#cb11-13"></a> <span class="fl">3.</span>     └─shinytest2<span class="sc">:::</span><span class="fu">app__expect_snapshot_file</span>(...)</span>
<span id="cb11-14"><a href="#cb11-14"></a> <span class="fl">4.</span>       ├─base<span class="sc">::</span><span class="fu">withCallingHandlers</span>(...)</span>
<span id="cb11-15"><a href="#cb11-15"></a> <span class="fl">5.</span>       └─testthat<span class="sc">::</span><span class="fu">expect_snapshot_file</span>(...)</span>
<span id="cb11-16"><a href="#cb11-16"></a></span>
<span id="cb11-17"><a href="#cb11-17"></a>── <span class="fu">Warning</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">25</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> no<span class="sc">-</span>name<span class="sc">-</span>greeting ──</span>
<span id="cb11-18"><a href="#cb11-18"></a>Diff <span class="cf">in</span> snapshot file <span class="st">`</span><span class="at">shinytest2no-name-greeting-001.json</span><span class="st">`</span></span>
<span id="cb11-19"><a href="#cb11-19"></a><span class="sc">&lt;</span> before                                                                   </span>
<span id="cb11-20"><a href="#cb11-20"></a><span class="sc">&gt;</span> after                                                                    </span>
<span id="cb11-21"><a href="#cb11-21"></a><span class="sc">@</span><span class="er">@</span> <span class="dv">5</span>,<span class="dv">5</span> <span class="sc">/</span> <span class="dv">5</span>,<span class="dv">5</span> <span class="sc">@</span><span class="er">@</span>                                                            </span>
<span id="cb11-22"><a href="#cb11-22"></a>    <span class="er">}</span>,                                                                     </span>
<span id="cb11-23"><a href="#cb11-23"></a>    <span class="st">"output"</span><span class="sc">:</span> {                                                            </span>
<span id="cb11-24"><a href="#cb11-24"></a><span class="sc">&lt;</span>     <span class="st">"greeting_output"</span><span class="sc">:</span> <span class="st">"Hello !"</span>                                         </span>
<span id="cb11-25"><a href="#cb11-25"></a><span class="sc">&gt;</span>     <span class="st">"greeting_output"</span><span class="sc">:</span> <span class="st">"Please type a name, then click the Greet button."</span></span>
<span id="cb11-26"><a href="#cb11-26"></a>    },                                                                     </span>
<span id="cb11-27"><a href="#cb11-27"></a>    <span class="st">"export"</span><span class="sc">:</span> {                                                            </span>
<span id="cb11-28"><a href="#cb11-28"></a>[ FAIL <span class="dv">1</span> <span class="sc">|</span> WARN <span class="dv">1</span> <span class="sc">|</span> SKIP <span class="dv">0</span> <span class="sc">|</span> PASS <span class="dv">3</span> ]</span>
<span id="cb11-29"><a href="#cb11-29"></a>Warning messages<span class="sc">:</span></span>
<span id="cb11-30"><a href="#cb11-30"></a><span class="dv">1</span><span class="sc">:</span> package ‘testthat’ was built under R version <span class="dv">4</span>.<span class="fl">3.1</span> </span>
<span id="cb11-31"><a href="#cb11-31"></a><span class="dv">2</span><span class="sc">:</span> package ‘shiny’ was built under R version <span class="dv">4</span>.<span class="fl">3.1</span> </span>
<span id="cb11-32"><a href="#cb11-32"></a></span>
<span id="cb11-33"><a href="#cb11-33"></a>Test complete</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="update-expectations" class="slide level2" data-menu-title="Update expected results">
<h2></h2>
<p><span class="slide-title">We’ll want to update our expected results</span></p>
<hr>
<p><span class="body-text-s"><strong>Our test correctly failed (the expected output was different)!</strong> But we’ll want to update our test’s expected output so that it reflects the changes we made to our app (i.e.&nbsp;that when a user clicks the Greet button without first typing a name, the text “Please type a name before clicking the Greet button.” is printed).</span></p>
<div class="fragment">
<p><br></p>
<p><span class="body-text-s">We can use use <code>testthat::snapshot_review()</code>, which opens a Shiny app for visually comparing differences (aka <em>diffs</em>) between snapshots and accepting (or rejecting) updates.</span></p>
</div>
<div class="fragment">
<p><br></p>
<p><span class="teal-text body-text-m"><strong>Steps:</strong></span></p>
<ol type="1">
<li>Install the <a href="https://github.com/r-lib/diffviewer"><code>{diffviewer}</code> package</a></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"diffviewer"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Run the following in your Console to launch the app:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="at">path =</span> <span class="st">"testing-app/tests/testthat/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p><a href="https://github.com/r-lib/testthat/blob/f060ccec365e1343ae926c53c215a423b295d7a8/R/snapshot-manage.R#L4" class="uri">https://github.com/r-lib/testthat/blob/f060ccec365e1343ae926c53c215a423b295d7a8/R/snapshot-manage.R#L4</a></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="snapshot-review" class="slide level2" data-menu-title="snapshot_review()">
<h2></h2>
<p><span class="slide-title2">Explore and accept the updated test expectations</span></p>
<hr>
<p>The app allows for a few different ways to view snapshot diffs. Click Accept for both the PNG and JSON files, then close the window:</p>
<p><br></p>

<img data-src="images/part6/snapshot-review.gif" style="width:80.0%" class="r-stretch quarto-figure-center"></section>
<section id="updated-snapshots" class="slide level2" data-menu-title="Updated snapshots">
<h2></h2>
<p><span class="slide-title2">Check out your updated snapshots</span></p>
<hr>
<p>Check out <code>no-name-greeting-001_.png</code> and <code>no-name-greeting-001.json</code> snapshots, which should be updated to reflect the new test expectations.</p>

<img data-src="images/part6/updated-snapshots.png" style="width:80.0%" class="r-stretch quarto-figure-center"></section>
<section id="feature2-code" class="slide level2" data-menu-title="Feature 2 code">
<h2></h2>
<p><span class="slide-title">Your boss requests another feature!</span></p>
<hr>
<p><span class="body-text-s">Your boss is jazzed about your latest improvements, and now asks that you add a file uploader which accepts a standardized CSV file (predictable headings / data types) then averages values by column. You update your app:</span></p>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1"><code>global.R</code></a></li><li><a href="#tabset-2-2"><code>ui.R</code></a></li><li><a href="#tabset-2-3"><code>server.R</code></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>testing-app/global.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># load libraries ----</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="fu">library</span>(shiny)</span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>testing-app/ui.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb15-2"><a href="#cb15-2"></a></span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="co"># Feature 1 ------------------------------------------------------------------</span></span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a>  <span class="fu">h3</span>(<span class="st">"Feature 1"</span>),</span>
<span id="cb15-6"><a href="#cb15-6"></a></span>
<span id="cb15-7"><a href="#cb15-7"></a>  <span class="co"># fluidRow (Feature 1: greeting) ----</span></span>
<span id="cb15-8"><a href="#cb15-8"></a>  <span class="fu">fluidRow</span>(</span>
<span id="cb15-9"><a href="#cb15-9"></a></span>
<span id="cb15-10"><a href="#cb15-10"></a>    <span class="co"># greeting sidebarLayout ----</span></span>
<span id="cb15-11"><a href="#cb15-11"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb15-12"><a href="#cb15-12"></a></span>
<span id="cb15-13"><a href="#cb15-13"></a>      <span class="co"># greeting sidebarPanel ----</span></span>
<span id="cb15-14"><a href="#cb15-14"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb15-15"><a href="#cb15-15"></a></span>
<span id="cb15-16"><a href="#cb15-16"></a>        <span class="fu">textInput</span>(<span class="at">inputId =</span> <span class="st">"name_input"</span>,</span>
<span id="cb15-17"><a href="#cb15-17"></a>                  <span class="at">label =</span> <span class="st">"What is your name?"</span>),</span>
<span id="cb15-18"><a href="#cb15-18"></a></span>
<span id="cb15-19"><a href="#cb15-19"></a>        <span class="fu">actionButton</span>(<span class="at">inputId =</span> <span class="st">"greeting_button_input"</span>,</span>
<span id="cb15-20"><a href="#cb15-20"></a>                     <span class="at">label =</span> <span class="st">"Greet"</span>),</span>
<span id="cb15-21"><a href="#cb15-21"></a></span>
<span id="cb15-22"><a href="#cb15-22"></a>      ), <span class="co"># </span><span class="re">END</span><span class="co"> greeting sidebarPanel</span></span>
<span id="cb15-23"><a href="#cb15-23"></a></span>
<span id="cb15-24"><a href="#cb15-24"></a>      <span class="co"># greeting mainPanel ----</span></span>
<span id="cb15-25"><a href="#cb15-25"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb15-26"><a href="#cb15-26"></a></span>
<span id="cb15-27"><a href="#cb15-27"></a>        <span class="fu">textOutput</span>(<span class="at">outputId =</span> <span class="st">"greeting_output"</span>),</span>
<span id="cb15-28"><a href="#cb15-28"></a></span>
<span id="cb15-29"><a href="#cb15-29"></a>      ) <span class="co"># </span><span class="re">END</span><span class="co"> greeting mainPanel</span></span>
<span id="cb15-30"><a href="#cb15-30"></a></span>
<span id="cb15-31"><a href="#cb15-31"></a>    ) <span class="co"># </span><span class="re">END</span><span class="co"> greeting sidebarLayout</span></span>
<span id="cb15-32"><a href="#cb15-32"></a></span>
<span id="cb15-33"><a href="#cb15-33"></a>  ), <span class="co"># </span><span class="re">END</span><span class="co"> fluidRow (Feature 1: greeting)</span></span>
<span id="cb15-34"><a href="#cb15-34"></a>  </span>
<span id="cb15-35"><a href="#cb15-35"></a>  tags<span class="sc">$</span><span class="fu">hr</span>(),</span>
<span id="cb15-36"><a href="#cb15-36"></a></span>
<span id="cb15-37"><a href="#cb15-37"></a>  <span class="co"># Feature 2 ------------------------------------------------------------------</span></span>
<span id="cb15-38"><a href="#cb15-38"></a></span>
<span id="cb15-39"><a href="#cb15-39"></a>  <span class="fu">h3</span>(<span class="st">"Feature 2"</span>),</span>
<span id="cb15-40"><a href="#cb15-40"></a></span>
<span id="cb15-41"><a href="#cb15-41"></a>  <span class="co"># fluidRow (Feature 2: file upload) -----</span></span>
<span id="cb15-42"><a href="#cb15-42"></a>  <span class="fu">fluidRow</span>(</span>
<span id="cb15-43"><a href="#cb15-43"></a></span>
<span id="cb15-44"><a href="#cb15-44"></a>    <span class="co"># file upload sidebarLayout ----</span></span>
<span id="cb15-45"><a href="#cb15-45"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb15-46"><a href="#cb15-46"></a></span>
<span id="cb15-47"><a href="#cb15-47"></a>      <span class="co"># file upload sidebarPanel ----</span></span>
<span id="cb15-48"><a href="#cb15-48"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb15-49"><a href="#cb15-49"></a></span>
<span id="cb15-50"><a href="#cb15-50"></a>        <span class="co"># upload fileInput -----</span></span>
<span id="cb15-51"><a href="#cb15-51"></a>        <span class="fu">fileInput</span>(<span class="at">inputId =</span> <span class="st">"csv_input"</span>,</span>
<span id="cb15-52"><a href="#cb15-52"></a>                  <span class="at">label =</span> <span class="st">"Upload your CSV file:"</span>,</span>
<span id="cb15-53"><a href="#cb15-53"></a>                  <span class="at">multiple =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-54"><a href="#cb15-54"></a>                  <span class="at">accept =</span> <span class="fu">c</span>(<span class="st">".csv"</span>),</span>
<span id="cb15-55"><a href="#cb15-55"></a>                  <span class="at">buttonLabel =</span> <span class="st">"Browse"</span>,</span>
<span id="cb15-56"><a href="#cb15-56"></a>                  <span class="at">placeholder =</span> <span class="st">"No file selected"</span>), <span class="co"># </span><span class="re">END</span><span class="co"> upload fileInput</span></span>
<span id="cb15-57"><a href="#cb15-57"></a></span>
<span id="cb15-58"><a href="#cb15-58"></a>      ), <span class="co"># </span><span class="re">END</span><span class="co"> file upload sidebarPanel</span></span>
<span id="cb15-59"><a href="#cb15-59"></a></span>
<span id="cb15-60"><a href="#cb15-60"></a>      <span class="co"># fileInput mainPanel ----</span></span>
<span id="cb15-61"><a href="#cb15-61"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb15-62"><a href="#cb15-62"></a></span>
<span id="cb15-63"><a href="#cb15-63"></a>        <span class="fu">tableOutput</span>(<span class="at">outputId =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb15-64"><a href="#cb15-64"></a></span>
<span id="cb15-65"><a href="#cb15-65"></a>      ) <span class="co"># </span><span class="re">END</span><span class="co"> file upload mainPanel</span></span>
<span id="cb15-66"><a href="#cb15-66"></a></span>
<span id="cb15-67"><a href="#cb15-67"></a>    ) <span class="co"># </span><span class="re">END</span><span class="co"> file upload sidebarLayout</span></span>
<span id="cb15-68"><a href="#cb15-68"></a></span>
<span id="cb15-69"><a href="#cb15-69"></a>  ), <span class="co"># </span><span class="re">END</span><span class="co"> fluidRow (Feature 2: file upload)</span></span>
<span id="cb15-70"><a href="#cb15-70"></a>  </span>
<span id="cb15-71"><a href="#cb15-71"></a>) <span class="co"># </span><span class="re">END</span><span class="co"> fluidPage </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div id="tabset-2-3">
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>testing-app/server.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb16-2"><a href="#cb16-2"></a>  </span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="co"># Feature 1 ------------------------------------------------------------------</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="co"># wait for user to click the Greet button before returning the message</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>  <span class="fu">observe</span>({</span>
<span id="cb16-6"><a href="#cb16-6"></a>    </span>
<span id="cb16-7"><a href="#cb16-7"></a>    <span class="co"># if the user does not type anything, return the message, "Please type a name, then click the Greet button."</span></span>
<span id="cb16-8"><a href="#cb16-8"></a>    <span class="cf">if</span> (<span class="fu">nchar</span>(input<span class="sc">$</span>name_input) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb16-9"><a href="#cb16-9"></a>      output<span class="sc">$</span>greeting_output <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb16-10"><a href="#cb16-10"></a>        <span class="st">"Please type a name, then click the Greet button."</span></span>
<span id="cb16-11"><a href="#cb16-11"></a>      })</span>
<span id="cb16-12"><a href="#cb16-12"></a>      </span>
<span id="cb16-13"><a href="#cb16-13"></a>      <span class="co"># if the user does type a name, return the greeting, "Hello [name]!"</span></span>
<span id="cb16-14"><a href="#cb16-14"></a>    } <span class="cf">else</span> {</span>
<span id="cb16-15"><a href="#cb16-15"></a>      output<span class="sc">$</span>greeting_output <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb16-16"><a href="#cb16-16"></a>        <span class="fu">paste0</span>(<span class="st">"Hello "</span>, <span class="fu">isolate</span>(input<span class="sc">$</span>name_input), <span class="st">"!"</span>)</span>
<span id="cb16-17"><a href="#cb16-17"></a>      })</span>
<span id="cb16-18"><a href="#cb16-18"></a>    }</span>
<span id="cb16-19"><a href="#cb16-19"></a>  }) <span class="sc">|&gt;</span></span>
<span id="cb16-20"><a href="#cb16-20"></a>    </span>
<span id="cb16-21"><a href="#cb16-21"></a>    <span class="co"># </span><span class="al">TODO</span><span class="co">: add description here</span></span>
<span id="cb16-22"><a href="#cb16-22"></a>    <span class="fu">bindEvent</span>(input<span class="sc">$</span>greeting_button_input)</span>
<span id="cb16-23"><a href="#cb16-23"></a>  </span>
<span id="cb16-24"><a href="#cb16-24"></a>  <span class="co"># Feature 2 ------------------------------------------------------------------</span></span>
<span id="cb16-25"><a href="#cb16-25"></a>  </span>
<span id="cb16-26"><a href="#cb16-26"></a>  <span class="co"># file upload ----</span></span>
<span id="cb16-27"><a href="#cb16-27"></a>  output<span class="sc">$</span>summary_table_output <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb16-28"><a href="#cb16-28"></a>    </span>
<span id="cb16-29"><a href="#cb16-29"></a>    <span class="co"># </span><span class="al">NOTE</span><span class="co">: `input$csv_input` will be NULL initially</span></span>
<span id="cb16-30"><a href="#cb16-30"></a>    <span class="co"># after user selects / uploads a file, it will be a df with 'name', 'size', 'type', 'datapath' cols</span></span>
<span id="cb16-31"><a href="#cb16-31"></a>    <span class="co"># 'datapath' col will contain the local filenames where data can be found</span></span>
<span id="cb16-32"><a href="#cb16-32"></a>    <span class="co"># see: https://shiny.posit.co/r/reference/shiny/1.4.0/fileinput</span></span>
<span id="cb16-33"><a href="#cb16-33"></a>    </span>
<span id="cb16-34"><a href="#cb16-34"></a>    <span class="co"># save input value to object named `inputFile` ----</span></span>
<span id="cb16-35"><a href="#cb16-35"></a>    inputFile <span class="ot">&lt;-</span> input<span class="sc">$</span>csv_input</span>
<span id="cb16-36"><a href="#cb16-36"></a>    </span>
<span id="cb16-37"><a href="#cb16-37"></a>    <span class="co"># if a file has not been uploaded yet, don't return / print anything ----</span></span>
<span id="cb16-38"><a href="#cb16-38"></a>    <span class="cf">if</span>(<span class="fu">is.null</span>(inputFile))</span>
<span id="cb16-39"><a href="#cb16-39"></a>      <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb16-40"><a href="#cb16-40"></a>    </span>
<span id="cb16-41"><a href="#cb16-41"></a>    <span class="co"># read in file using it's datapath ----</span></span>
<span id="cb16-42"><a href="#cb16-42"></a>    df_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(inputFile<span class="sc">$</span>datapath)</span>
<span id="cb16-43"><a href="#cb16-43"></a>    </span>
<span id="cb16-44"><a href="#cb16-44"></a>    <span class="co"># validate that the uploaded CSV has the expected column names ----</span></span>
<span id="cb16-45"><a href="#cb16-45"></a>    required_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"temp_c"</span>, <span class="st">"precip_cm"</span>, <span class="st">"wind_kmhr"</span>, <span class="st">"pressure_inhg"</span>)</span>
<span id="cb16-46"><a href="#cb16-46"></a>    column_names <span class="ot">&lt;-</span> <span class="fu">colnames</span>(df_raw)</span>
<span id="cb16-47"><a href="#cb16-47"></a>    <span class="fu">validate</span>(</span>
<span id="cb16-48"><a href="#cb16-48"></a>      <span class="fu">need</span>(<span class="fu">all</span>(required_cols <span class="sc">%in%</span> column_names), <span class="st">"Your CSV does not have the expected column headers."</span>)</span>
<span id="cb16-49"><a href="#cb16-49"></a>    )</span>
<span id="cb16-50"><a href="#cb16-50"></a>    </span>
<span id="cb16-51"><a href="#cb16-51"></a>    <span class="co"># return summarized data in a table ----</span></span>
<span id="cb16-52"><a href="#cb16-52"></a>    df_summary <span class="ot">&lt;-</span> df_raw <span class="sc">|&gt;</span></span>
<span id="cb16-53"><a href="#cb16-53"></a>      <span class="fu">summarize</span>(</span>
<span id="cb16-54"><a href="#cb16-54"></a>        <span class="at">avg_temp =</span> <span class="fu">mean</span>(temp_c),</span>
<span id="cb16-55"><a href="#cb16-55"></a>        <span class="at">avg_precip =</span> <span class="fu">mean</span>(precip_cm),</span>
<span id="cb16-56"><a href="#cb16-56"></a>        <span class="at">avg_wind =</span> <span class="fu">mean</span>(wind_kmhr),</span>
<span id="cb16-57"><a href="#cb16-57"></a>        <span class="at">avg_pressure =</span> <span class="fu">mean</span>(pressure_inhg),</span>
<span id="cb16-58"><a href="#cb16-58"></a>        <span class="at">tot_num_obs =</span> <span class="fu">length</span>(temp_c)</span>
<span id="cb16-59"><a href="#cb16-59"></a>      ) <span class="sc">|&gt;</span></span>
<span id="cb16-60"><a href="#cb16-60"></a>      <span class="fu">rename</span>(<span class="st">"Mean Temperature (C)"</span> <span class="ot">=</span> <span class="st">"avg_temp"</span>,</span>
<span id="cb16-61"><a href="#cb16-61"></a>             <span class="st">"Mean Precipitation (cm)"</span> <span class="ot">=</span> <span class="st">"avg_precip"</span>,</span>
<span id="cb16-62"><a href="#cb16-62"></a>             <span class="st">"Mean Wind Speed (km/hr)"</span> <span class="ot">=</span> <span class="st">"avg_wind"</span>,</span>
<span id="cb16-63"><a href="#cb16-63"></a>             <span class="st">"Mean Pressure (inHg)"</span> <span class="ot">=</span> <span class="st">"avg_pressure"</span>,</span>
<span id="cb16-64"><a href="#cb16-64"></a>             <span class="st">"Total Number of Observations"</span> <span class="ot">=</span> <span class="st">"tot_num_obs"</span>)</span>
<span id="cb16-65"><a href="#cb16-65"></a>    <span class="fu">return</span>(df_summary)</span>
<span id="cb16-66"><a href="#cb16-66"></a>    </span>
<span id="cb16-67"><a href="#cb16-67"></a>  })</span>
<span id="cb16-68"><a href="#cb16-68"></a>  </span>
<span id="cb16-69"><a href="#cb16-69"></a>} <span class="co"># </span><span class="re">END</span><span class="co"> server</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="run-ft2-app" class="slide level2" data-menu-title="Run the app">
<h2></h2>
<p><span class="slide-title2">Run your app &amp; play around with the new feature</span></p>
<hr>
<p>You can practice uploading <a href="https://drive.google.com/file/d/1X3Y1J1pWX1OHNEcieyBpueL2MXOt5hWB/view?usp=drive_link">this csv file, <code>real-sample-data.csv</code></a>, which is representative of the data that your team will want processed.</p>

<img data-src="images/part6/ft2-upload.gif" style="width:100.0%" class="r-stretch quarto-figure-center"><p><br></p>
<div class="center-text">
<p>Your boss gives you the green light to start writing tests.</p>
</div>
</section>
<section id="ft2-assertions" class="slide level2" data-menu-title="Feature 2 assertions">
<h2></h2>
<p><span class="slide-title3">Begin by jotting down any assertions you can think of</span></p>
<hr>
<p>Chat with the person(s) next to you and try to come up with a few different actions / scenarios a user may encounter.</p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_a3f8aa7e" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:2em;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="fragment">
<table>
<colgroup>
<col style="width: 60%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Action(s)</th>
<th>Expectation(s)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Click Browse &gt; Select CSV file with correct column headers and data</td>
<td>The data set is returned as a table with renamed / averaged columns</td>
</tr>
<tr class="even">
<td>Click Browse &gt; Select CSV with incorrect column headers</td>
<td>An error message, “Your CSV does not have the expected column headers” is returned</td>
</tr>
<tr class="odd">
<td>Click Browse &gt; Select empty CSV (no column headers or data)</td>
<td>An error message, “Your CSV does not have the expected column headers” is returned</td>
</tr>
<tr class="even">
<td>Click Browse &gt; Select CSV file with only column headers and no data</td>
<td>The data set is returned as a table with renamed columns and NA values</td>
</tr>
<tr class="odd">
<td>Click Browse &gt; Select CSV file with only data and no column headers</td>
<td>An error message, “Your CSV does not have the expected column headers” is returned</td>
</tr>
<tr class="even">
<td>Click Browse &gt; Select CSV file with correct column headers and data &gt; Click Browse again &gt; Select a different CSV with correct column headers and data</td>
<td>The first data set is returned as a table with renamed / averaged columns is returned, then the second data set is returned as a table with renamed / averaged columns</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="create-test-data" class="slide level2" data-menu-title="Create test data">
<h2></h2>
<p><span class="slide-title">We’ll also need some test data</span></p>
<hr>
<p>We’ll need CSVs which can be used as representative examples for each of the scenarios we want to test for. This includes:</p>
<ul>
<li><span class="body-text-s">two different CSVs, each with correct column headers / data</span></li>
<li><span class="body-text-s">one CSV with incorrect column headers</span></li>
<li><span class="body-text-s">one completely blank CSV</span></li>
<li><span class="body-text-s">one CSV with column headers but missing data</span></li>
<li><span class="body-text-s">one CSV with data but missing column headers</span></li>
</ul>
<p><br></p>
<p>The test data do not necessarily need to be “real” (i.e.&nbsp;real measurements collected by instruments or people). They can be simple, short data sets, so long as they cover the scenarios we’ve discussed.</p>
<p><br></p>
<div class="center-text body-text-m">
<p><strong>Download these test data <a href="https://drive.google.com/drive/folders/14VIirofAz04KwTyHqQ_8pbOK95IqUQ1H?usp=drive_link">CSV files</a></strong>, which we’ll use to create our tests (you can save them to your Desktop for now).</p>
</div>
</section>
<section id="storing-test-data" class="slide level2" data-menu-title="Storing test data">
<h2></h2>
<p><span class="slide-title">Store test data in <code>tests/testthat/</code></span></p>
<hr>
<p><br></p>
<p>Whenever you record a file upload event to a <code>fileInput</code>, the test script will include a line similar to this,</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>app<span class="sc">$</span><span class="fu">uploadFile</span>(<span class="at">file1 =</span> <span class="st">"your-data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>which indicates the file name, but not the file path. <code>{shinytest2}</code> will look for a test file with that name inside the <code>tests/testthat/</code> folder.</p>
<p><br></p>
<div class="center-text body-text-m">
<p><strong>Make <em>copies</em> of all of the test files into <code>tests/testthat/</code>.</strong></p>
</div>
</section>
<section id="ft2-test1" class="slide level2" data-menu-title="Feature 2, test 1">
<h2></h2>
<p><span class="slide-title2">Okay, let’s finally write our first test!</span></p>
<hr>
<p><br></p>
<p><span class="body-text-m teal-text"><strong>Repeat the steps from earlier:</strong></span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(1)</strong></span> Run <code>shinytest2::record_test("testing-app")</code> in the Console</span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(2)</strong></span> Click Browse &gt; select <code>cols-and-data1.csv</code> from wherever you have it saved (mine is on my Desktop) &gt; click Expect Shiny Values</span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(3)</strong></span> Give the test a unique name (e.g.&nbsp;<code>upload-cols-and-data</code>) &gt; click Save test and exit</span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(4)</strong></span> The test recorder will quit, and your test will automatically execute</span></p>
<p><br></p>
<div class="fragment">
<div class="center-text body-text-l">
<p>What happens?</p>
</div>
</div>
<div class="fragment">
<div class="center-text body-text-l">
<p>Our last three tests failed??? What???</p>
</div>
</div>
</section>
<section id="old-tests-fail" class="slide level2" data-menu-title="Old tests fail">
<h2></h2>
<p><span class="slide-title2">Explore the diffs in your Console</span></p>
<hr>
<p>Your console should look similar to this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>Listening on http<span class="sc">:</span><span class="er">//</span><span class="dv">127</span>.<span class="dv">0</span>.<span class="fl">0.1</span><span class="sc">:</span><span class="dv">6179</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>{shiny} R stderr <span class="sc">-----------</span> Loading required package<span class="sc">:</span> shiny</span>
<span id="cb18-3"><a href="#cb18-3"></a>{shiny} R stderr <span class="sc">-----------</span> Warning<span class="sc">:</span> package ‘shiny’ was built under R version <span class="dv">4</span>.<span class="fl">3.1</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>{shiny} R stderr <span class="sc">-----------</span> Running application <span class="cf">in</span> test mode.</span>
<span id="cb18-5"><a href="#cb18-5"></a>{shiny} R stderr <span class="sc">-----------</span> Warning<span class="sc">:</span> package ‘ggplot2’ was built under R version <span class="dv">4</span>.<span class="fl">3.1</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>{shiny} R stderr <span class="sc">-----------</span> Warning<span class="sc">:</span> package ‘dplyr’ was built under R version <span class="dv">4</span>.<span class="fl">3.1</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>{shiny} R stderr <span class="sc">-----------</span> Warning<span class="sc">:</span> package ‘stringr’ was built under R version <span class="dv">4</span>.<span class="fl">3.1</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>{shiny} R stderr <span class="sc">-----------</span> </span>
<span id="cb18-9"><a href="#cb18-9"></a>{shiny} R stderr <span class="sc">-----------</span> Listening on http<span class="sc">:</span><span class="er">//</span><span class="dv">127</span>.<span class="dv">0</span>.<span class="fl">0.1</span><span class="sc">:</span><span class="dv">4693</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>{shiny} R stdout <span class="sc">-----------</span> ── Attaching core tidyverse packages ──────────────────────── tidyverse <span class="dv">2</span>.<span class="fl">0.0</span> ──</span>
<span id="cb18-11"><a href="#cb18-11"></a>{shiny} R stdout <span class="sc">-----------</span> ✔ dplyr     <span class="dv">1</span>.<span class="fl">1.4</span>     ✔ readr     <span class="dv">2</span>.<span class="fl">1.4</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>{shiny} R stdout <span class="sc">-----------</span> ✔ forcats   <span class="dv">1</span>.<span class="fl">0.0</span>     ✔ stringr   <span class="dv">1</span>.<span class="fl">5.1</span></span>
<span id="cb18-13"><a href="#cb18-13"></a>{shiny} R stdout <span class="sc">-----------</span> ✔ ggplot2   <span class="dv">3</span>.<span class="fl">5.0</span>     ✔ tibble    <span class="dv">3</span>.<span class="fl">2.1</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>{shiny} R stdout <span class="sc">-----------</span> ✔ lubridate <span class="dv">1</span>.<span class="fl">9.2</span>     ✔ tidyr     <span class="dv">1</span>.<span class="fl">3.0</span></span>
<span id="cb18-15"><a href="#cb18-15"></a>{shiny} R stdout <span class="sc">-----------</span> ✔ purrr     <span class="dv">1</span>.<span class="fl">0.2</span>     </span>
<span id="cb18-16"><a href="#cb18-16"></a>{shiny} R stdout <span class="sc">-----------</span> ── Conflicts ────────────────────────────────────────── <span class="fu">tidyverse_conflicts</span>() ──</span>
<span id="cb18-17"><a href="#cb18-17"></a>{shiny} R stdout <span class="sc">-----------</span> ✖ dplyr<span class="sc">::</span><span class="fu">filter</span>() masks stats<span class="sc">::</span><span class="fu">filter</span>()</span>
<span id="cb18-18"><a href="#cb18-18"></a>{shiny} R stdout <span class="sc">-----------</span> ✖ dplyr<span class="sc">::</span><span class="fu">lag</span>()    masks stats<span class="sc">::</span><span class="fu">lag</span>()</span>
<span id="cb18-19"><a href="#cb18-19"></a>{shiny} R stdout <span class="sc">-----------</span> ℹ Use the conflicted <span class="fu">package</span> (<span class="sc">&lt;</span>http<span class="sc">:</span><span class="er">//</span>conflicted.r<span class="sc">-</span>lib.org<span class="sc">/</span><span class="er">&gt;</span>) to force all conflicts to become errors</span>
<span id="cb18-20"><a href="#cb18-20"></a>{shiny} R stdout <span class="sc">-----------</span> Rows<span class="sc">:</span> <span class="dv">4</span> Columns<span class="sc">:</span> <span class="dv">4</span></span>
<span id="cb18-21"><a href="#cb18-21"></a>{shiny} R stdout <span class="sc">-----------</span> ── Column specification ────────────────────────────────────────────────────────</span>
<span id="cb18-22"><a href="#cb18-22"></a>{shiny} R stdout <span class="sc">-----------</span> Delimiter<span class="sc">:</span> <span class="st">","</span></span>
<span id="cb18-23"><a href="#cb18-23"></a>{shiny} R stdout <span class="sc">-----------</span> <span class="fu">dbl</span> (<span class="dv">4</span>)<span class="sc">:</span> temp_c, precip_cm, wind_kmhr, pressure_inhg</span>
<span id="cb18-24"><a href="#cb18-24"></a>{shiny} R stdout <span class="sc">-----------</span> </span>
<span id="cb18-25"><a href="#cb18-25"></a>{shiny} R stdout <span class="sc">-----------</span> ℹ Use <span class="st">`</span><span class="at">spec()</span><span class="st">`</span> to retrieve the full column specification <span class="cf">for</span> this data.</span>
<span id="cb18-26"><a href="#cb18-26"></a>{shiny} R stdout <span class="sc">-----------</span> ℹ Specify the column types or set <span class="st">`</span><span class="at">show_col_types = FALSE</span><span class="st">`</span> to quiet this message.</span>
<span id="cb18-27"><a href="#cb18-27"></a>• Saving test file<span class="sc">:</span> tests<span class="sc">/</span>testthat<span class="sc">/</span>test<span class="sc">-</span>shinytest2.R</span>
<span id="cb18-28"><a href="#cb18-28"></a>• Modify <span class="st">'/Users/samanthacsik/git/EDS-430/testing-shiny-apps/testing-app/tests/testthat/test-shinytest2.R'</span></span>
<span id="cb18-29"><a href="#cb18-29"></a>• Running recorded test<span class="sc">:</span> tests<span class="sc">/</span>testthat<span class="sc">/</span>test<span class="sc">-</span>shinytest2.R</span>
<span id="cb18-30"><a href="#cb18-30"></a>Loading required package<span class="sc">:</span> testthat</span>
<span id="cb18-31"><a href="#cb18-31"></a>── Attaching core tidyverse packages ─────────────────────────────────────────────────────────────────────── tidyverse <span class="dv">2</span>.<span class="fl">0.0</span> ──</span>
<span id="cb18-32"><a href="#cb18-32"></a>✔ dplyr     <span class="dv">1</span>.<span class="fl">1.4</span>     ✔ readr     <span class="dv">2</span>.<span class="fl">1.4</span></span>
<span id="cb18-33"><a href="#cb18-33"></a>✔ forcats   <span class="dv">1</span>.<span class="fl">0.0</span>     ✔ stringr   <span class="dv">1</span>.<span class="fl">5.1</span></span>
<span id="cb18-34"><a href="#cb18-34"></a>✔ ggplot2   <span class="dv">3</span>.<span class="fl">5.0</span>     ✔ tibble    <span class="dv">3</span>.<span class="fl">2.1</span></span>
<span id="cb18-35"><a href="#cb18-35"></a>✔ lubridate <span class="dv">1</span>.<span class="fl">9.2</span>     ✔ tidyr     <span class="dv">1</span>.<span class="fl">3.0</span></span>
<span id="cb18-36"><a href="#cb18-36"></a>✔ purrr     <span class="dv">1</span>.<span class="fl">0.2</span>     </span>
<span id="cb18-37"><a href="#cb18-37"></a>── Conflicts ───────────────────────────────────────────────────────────────────────────────────────── <span class="fu">tidyverse_conflicts</span>() ──</span>
<span id="cb18-38"><a href="#cb18-38"></a>✖ readr<span class="sc">::</span><span class="fu">edition_get</span>()   masks testthat<span class="sc">::</span><span class="fu">edition_get</span>()</span>
<span id="cb18-39"><a href="#cb18-39"></a>✖ dplyr<span class="sc">::</span><span class="fu">filter</span>()        masks stats<span class="sc">::</span><span class="fu">filter</span>()</span>
<span id="cb18-40"><a href="#cb18-40"></a>✖ purrr<span class="sc">::</span><span class="fu">is_null</span>()       masks testthat<span class="sc">::</span><span class="fu">is_null</span>()</span>
<span id="cb18-41"><a href="#cb18-41"></a>✖ dplyr<span class="sc">::</span><span class="fu">lag</span>()           masks stats<span class="sc">::</span><span class="fu">lag</span>()</span>
<span id="cb18-42"><a href="#cb18-42"></a>✖ readr<span class="sc">::</span><span class="fu">local_edition</span>() masks testthat<span class="sc">::</span><span class="fu">local_edition</span>()</span>
<span id="cb18-43"><a href="#cb18-43"></a>✖ dplyr<span class="sc">::</span><span class="fu">matches</span>()       masks tidyr<span class="sc">::</span><span class="fu">matches</span>(), testthat<span class="sc">::</span><span class="fu">matches</span>()</span>
<span id="cb18-44"><a href="#cb18-44"></a>ℹ Use the conflicted package to force all conflicts to become errors</span>
<span id="cb18-45"><a href="#cb18-45"></a>✔ <span class="sc">|</span> F W  S  OK <span class="sc">|</span> Context</span>
<span id="cb18-46"><a href="#cb18-46"></a>✖ <span class="sc">|</span> <span class="dv">4</span> <span class="dv">6</span>      <span class="dv">1</span> <span class="sc">|</span> shinytest2 [<span class="fl">7.4</span>s]                                                                                             </span>
<span id="cb18-47"><a href="#cb18-47"></a>───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb18-48"><a href="#cb18-48"></a><span class="fu">Failure</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">7</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> one<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-49"><a href="#cb18-49"></a>Snapshot of <span class="st">`</span><span class="at">file</span><span class="st">`</span> to <span class="st">'shinytest2/one-name-greeting-001.json'</span> has changed</span>
<span id="cb18-50"><a href="#cb18-50"></a>Run testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="st">'shinytest2/'</span>) to review changes</span>
<span id="cb18-51"><a href="#cb18-51"></a>Backtrace<span class="sc">:</span></span>
<span id="cb18-52"><a href="#cb18-52"></a>    ▆</span>
<span id="cb18-53"><a href="#cb18-53"></a> <span class="fl">1.</span> └─app<span class="sc">$</span><span class="fu">expect_values</span>() at test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">7</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb18-54"><a href="#cb18-54"></a> <span class="fl">2.</span>   └─shinytest2<span class="sc">:::</span><span class="fu">app_expect_values</span>(...)</span>
<span id="cb18-55"><a href="#cb18-55"></a> <span class="fl">3.</span>     └─shinytest2<span class="sc">:::</span><span class="fu">app__expect_snapshot_file</span>(...)</span>
<span id="cb18-56"><a href="#cb18-56"></a> <span class="fl">4.</span>       ├─base<span class="sc">::</span><span class="fu">withCallingHandlers</span>(...)</span>
<span id="cb18-57"><a href="#cb18-57"></a> <span class="fl">5.</span>       └─testthat<span class="sc">::</span><span class="fu">expect_snapshot_file</span>(...)</span>
<span id="cb18-58"><a href="#cb18-58"></a></span>
<span id="cb18-59"><a href="#cb18-59"></a><span class="fu">Warning</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">7</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> one<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-60"><a href="#cb18-60"></a>Diff <span class="cf">in</span> snapshot file <span class="st">`</span><span class="at">shinytest2one-name-greeting-001.json</span><span class="st">`</span></span>
<span id="cb18-61"><a href="#cb18-61"></a><span class="sc">&lt;</span> before                                <span class="sc">&gt;</span> after                               </span>
<span id="cb18-62"><a href="#cb18-62"></a><span class="sc">@</span><span class="er">@</span> <span class="dv">1</span>,<span class="dv">9</span> <span class="sc">@</span><span class="er">@</span>                               <span class="er">@@</span> <span class="dv">1</span>,<span class="dv">11</span> <span class="sc">@</span><span class="er">@</span>                            </span>
<span id="cb18-63"><a href="#cb18-63"></a>  {                                       {                                   </span>
<span id="cb18-64"><a href="#cb18-64"></a>    <span class="st">"input"</span><span class="sc">:</span> {                              <span class="st">"input"</span><span class="sc">:</span> {                        </span>
<span id="cb18-65"><a href="#cb18-65"></a><span class="sc">~</span>                                       <span class="er">&gt;</span>     <span class="st">"csv_input"</span><span class="sc">:</span> null,              </span>
<span id="cb18-66"><a href="#cb18-66"></a>      <span class="st">"greeting_button_input"</span><span class="sc">:</span> <span class="dv">1</span>,             <span class="st">"greeting_button_input"</span><span class="sc">:</span> <span class="dv">1</span>,     </span>
<span id="cb18-67"><a href="#cb18-67"></a>      <span class="st">"name_input"</span><span class="sc">:</span> <span class="st">"Sam"</span>                     <span class="st">"name_input"</span><span class="sc">:</span> <span class="st">"Sam"</span>             </span>
<span id="cb18-68"><a href="#cb18-68"></a>    },                                      },                                </span>
<span id="cb18-69"><a href="#cb18-69"></a>    <span class="st">"output"</span><span class="sc">:</span> {                             <span class="st">"output"</span><span class="sc">:</span> {                       </span>
<span id="cb18-70"><a href="#cb18-70"></a><span class="sc">&lt;</span>     <span class="st">"greeting_output"</span><span class="sc">:</span> <span class="st">"Hello Sam!"</span>   <span class="sc">&gt;</span>     <span class="st">"greeting_output"</span><span class="sc">:</span> <span class="st">"Hello Sam!"</span>,</span>
<span id="cb18-71"><a href="#cb18-71"></a><span class="sc">~</span>                                       <span class="er">&gt;</span>     <span class="st">"summary_table_output"</span><span class="sc">:</span> null    </span>
<span id="cb18-72"><a href="#cb18-72"></a>    },                                      },                                </span>
<span id="cb18-73"><a href="#cb18-73"></a>    <span class="st">"export"</span><span class="sc">:</span> {                             <span class="st">"export"</span><span class="sc">:</span> {                       </span>
<span id="cb18-74"><a href="#cb18-74"></a></span>
<span id="cb18-75"><a href="#cb18-75"></a><span class="fu">Failure</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">15</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> consecutive<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-76"><a href="#cb18-76"></a>Snapshot of <span class="st">`</span><span class="at">file</span><span class="st">`</span> to <span class="st">'shinytest2/consecutive-name-greeting-001.json'</span> has changed</span>
<span id="cb18-77"><a href="#cb18-77"></a>Run testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="st">'shinytest2/'</span>) to review changes</span>
<span id="cb18-78"><a href="#cb18-78"></a>Backtrace<span class="sc">:</span></span>
<span id="cb18-79"><a href="#cb18-79"></a>    ▆</span>
<span id="cb18-80"><a href="#cb18-80"></a> <span class="fl">1.</span> └─app<span class="sc">$</span><span class="fu">expect_values</span>() at test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">15</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb18-81"><a href="#cb18-81"></a> <span class="fl">2.</span>   └─shinytest2<span class="sc">:::</span><span class="fu">app_expect_values</span>(...)</span>
<span id="cb18-82"><a href="#cb18-82"></a> <span class="fl">3.</span>     └─shinytest2<span class="sc">:::</span><span class="fu">app__expect_snapshot_file</span>(...)</span>
<span id="cb18-83"><a href="#cb18-83"></a> <span class="fl">4.</span>       ├─base<span class="sc">::</span><span class="fu">withCallingHandlers</span>(...)</span>
<span id="cb18-84"><a href="#cb18-84"></a> <span class="fl">5.</span>       └─testthat<span class="sc">::</span><span class="fu">expect_snapshot_file</span>(...)</span>
<span id="cb18-85"><a href="#cb18-85"></a></span>
<span id="cb18-86"><a href="#cb18-86"></a><span class="fu">Warning</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">15</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> consecutive<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-87"><a href="#cb18-87"></a>Diff <span class="cf">in</span> snapshot file <span class="st">`</span><span class="at">shinytest2consecutive-name-greeting-001.json</span><span class="st">`</span></span>
<span id="cb18-88"><a href="#cb18-88"></a><span class="sc">&lt;</span> before                                <span class="sc">&gt;</span> after                               </span>
<span id="cb18-89"><a href="#cb18-89"></a><span class="sc">@</span><span class="er">@</span> <span class="dv">1</span>,<span class="dv">9</span> <span class="sc">@</span><span class="er">@</span>                               <span class="er">@@</span> <span class="dv">1</span>,<span class="dv">11</span> <span class="sc">@</span><span class="er">@</span>                            </span>
<span id="cb18-90"><a href="#cb18-90"></a>  {                                       {                                   </span>
<span id="cb18-91"><a href="#cb18-91"></a>    <span class="st">"input"</span><span class="sc">:</span> {                              <span class="st">"input"</span><span class="sc">:</span> {                        </span>
<span id="cb18-92"><a href="#cb18-92"></a><span class="sc">~</span>                                       <span class="er">&gt;</span>     <span class="st">"csv_input"</span><span class="sc">:</span> null,              </span>
<span id="cb18-93"><a href="#cb18-93"></a>      <span class="st">"greeting_button_input"</span><span class="sc">:</span> <span class="dv">1</span>,             <span class="st">"greeting_button_input"</span><span class="sc">:</span> <span class="dv">1</span>,     </span>
<span id="cb18-94"><a href="#cb18-94"></a>      <span class="st">"name_input"</span><span class="sc">:</span> <span class="st">"Sam"</span>                     <span class="st">"name_input"</span><span class="sc">:</span> <span class="st">"Sam"</span>             </span>
<span id="cb18-95"><a href="#cb18-95"></a>    },                                      },                                </span>
<span id="cb18-96"><a href="#cb18-96"></a>    <span class="st">"output"</span><span class="sc">:</span> {                             <span class="st">"output"</span><span class="sc">:</span> {                       </span>
<span id="cb18-97"><a href="#cb18-97"></a><span class="sc">&lt;</span>     <span class="st">"greeting_output"</span><span class="sc">:</span> <span class="st">"Hello Sam!"</span>   <span class="sc">&gt;</span>     <span class="st">"greeting_output"</span><span class="sc">:</span> <span class="st">"Hello Sam!"</span>,</span>
<span id="cb18-98"><a href="#cb18-98"></a><span class="sc">~</span>                                       <span class="er">&gt;</span>     <span class="st">"summary_table_output"</span><span class="sc">:</span> null    </span>
<span id="cb18-99"><a href="#cb18-99"></a>    },                                      },                                </span>
<span id="cb18-100"><a href="#cb18-100"></a>    <span class="st">"export"</span><span class="sc">:</span> {                             <span class="st">"export"</span><span class="sc">:</span> {                       </span>
<span id="cb18-101"><a href="#cb18-101"></a></span>
<span id="cb18-102"><a href="#cb18-102"></a><span class="fu">Failure</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">18</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> consecutive<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-103"><a href="#cb18-103"></a>Snapshot of <span class="st">`</span><span class="at">file</span><span class="st">`</span> to <span class="st">'shinytest2/consecutive-name-greeting-002.json'</span> has changed</span>
<span id="cb18-104"><a href="#cb18-104"></a>Run testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="st">'shinytest2/'</span>) to review changes</span>
<span id="cb18-105"><a href="#cb18-105"></a>Backtrace<span class="sc">:</span></span>
<span id="cb18-106"><a href="#cb18-106"></a>    ▆</span>
<span id="cb18-107"><a href="#cb18-107"></a> <span class="fl">1.</span> └─app<span class="sc">$</span><span class="fu">expect_values</span>() at test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">18</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb18-108"><a href="#cb18-108"></a> <span class="fl">2.</span>   └─shinytest2<span class="sc">:::</span><span class="fu">app_expect_values</span>(...)</span>
<span id="cb18-109"><a href="#cb18-109"></a> <span class="fl">3.</span>     └─shinytest2<span class="sc">:::</span><span class="fu">app__expect_snapshot_file</span>(...)</span>
<span id="cb18-110"><a href="#cb18-110"></a> <span class="fl">4.</span>       ├─base<span class="sc">::</span><span class="fu">withCallingHandlers</span>(...)</span>
<span id="cb18-111"><a href="#cb18-111"></a> <span class="fl">5.</span>       └─testthat<span class="sc">::</span><span class="fu">expect_snapshot_file</span>(...)</span>
<span id="cb18-112"><a href="#cb18-112"></a></span>
<span id="cb18-113"><a href="#cb18-113"></a><span class="fu">Warning</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">18</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> consecutive<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-114"><a href="#cb18-114"></a>Diff <span class="cf">in</span> snapshot file <span class="st">`</span><span class="at">shinytest2consecutive-name-greeting-002.json</span><span class="st">`</span></span>
<span id="cb18-115"><a href="#cb18-115"></a><span class="sc">&lt;</span> before                                <span class="sc">&gt;</span> after                               </span>
<span id="cb18-116"><a href="#cb18-116"></a><span class="sc">@</span><span class="er">@</span> <span class="dv">1</span>,<span class="dv">9</span> <span class="sc">@</span><span class="er">@</span>                               <span class="er">@@</span> <span class="dv">1</span>,<span class="dv">11</span> <span class="sc">@</span><span class="er">@</span>                            </span>
<span id="cb18-117"><a href="#cb18-117"></a>  {                                       {                                   </span>
<span id="cb18-118"><a href="#cb18-118"></a>    <span class="st">"input"</span><span class="sc">:</span> {                              <span class="st">"input"</span><span class="sc">:</span> {                        </span>
<span id="cb18-119"><a href="#cb18-119"></a><span class="sc">~</span>                                       <span class="er">&gt;</span>     <span class="st">"csv_input"</span><span class="sc">:</span> null,              </span>
<span id="cb18-120"><a href="#cb18-120"></a>      <span class="st">"greeting_button_input"</span><span class="sc">:</span> <span class="dv">2</span>,             <span class="st">"greeting_button_input"</span><span class="sc">:</span> <span class="dv">2</span>,     </span>
<span id="cb18-121"><a href="#cb18-121"></a>      <span class="st">"name_input"</span><span class="sc">:</span> <span class="st">"Kat"</span>                     <span class="st">"name_input"</span><span class="sc">:</span> <span class="st">"Kat"</span>             </span>
<span id="cb18-122"><a href="#cb18-122"></a>    },                                      },                                </span>
<span id="cb18-123"><a href="#cb18-123"></a>    <span class="st">"output"</span><span class="sc">:</span> {                             <span class="st">"output"</span><span class="sc">:</span> {                       </span>
<span id="cb18-124"><a href="#cb18-124"></a><span class="sc">&lt;</span>     <span class="st">"greeting_output"</span><span class="sc">:</span> <span class="st">"Hello Kat!"</span>   <span class="sc">&gt;</span>     <span class="st">"greeting_output"</span><span class="sc">:</span> <span class="st">"Hello Kat!"</span>,</span>
<span id="cb18-125"><a href="#cb18-125"></a><span class="sc">~</span>                                       <span class="er">&gt;</span>     <span class="st">"summary_table_output"</span><span class="sc">:</span> null    </span>
<span id="cb18-126"><a href="#cb18-126"></a>    },                                      },                                </span>
<span id="cb18-127"><a href="#cb18-127"></a>    <span class="st">"export"</span><span class="sc">:</span> {                             <span class="st">"export"</span><span class="sc">:</span> {                       </span>
<span id="cb18-128"><a href="#cb18-128"></a></span>
<span id="cb18-129"><a href="#cb18-129"></a><span class="fu">Failure</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">25</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> no<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-130"><a href="#cb18-130"></a>Snapshot of <span class="st">`</span><span class="at">file</span><span class="st">`</span> to <span class="st">'shinytest2/no-name-greeting-001.json'</span> has changed</span>
<span id="cb18-131"><a href="#cb18-131"></a>Run testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="st">'shinytest2/'</span>) to review changes</span>
<span id="cb18-132"><a href="#cb18-132"></a>Backtrace<span class="sc">:</span></span>
<span id="cb18-133"><a href="#cb18-133"></a>    ▆</span>
<span id="cb18-134"><a href="#cb18-134"></a> <span class="fl">1.</span> └─app<span class="sc">$</span><span class="fu">expect_values</span>() at test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">25</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb18-135"><a href="#cb18-135"></a> <span class="fl">2.</span>   └─shinytest2<span class="sc">:::</span><span class="fu">app_expect_values</span>(...)</span>
<span id="cb18-136"><a href="#cb18-136"></a> <span class="fl">3.</span>     └─shinytest2<span class="sc">:::</span><span class="fu">app__expect_snapshot_file</span>(...)</span>
<span id="cb18-137"><a href="#cb18-137"></a> <span class="fl">4.</span>       ├─base<span class="sc">::</span><span class="fu">withCallingHandlers</span>(...)</span>
<span id="cb18-138"><a href="#cb18-138"></a> <span class="fl">5.</span>       └─testthat<span class="sc">::</span><span class="fu">expect_snapshot_file</span>(...)</span>
<span id="cb18-139"><a href="#cb18-139"></a></span>
<span id="cb18-140"><a href="#cb18-140"></a><span class="fu">Warning</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">25</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> no<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-141"><a href="#cb18-141"></a>Diff <span class="cf">in</span> snapshot file <span class="st">`</span><span class="at">shinytest2no-name-greeting-001.json</span><span class="st">`</span></span>
<span id="cb18-142"><a href="#cb18-142"></a><span class="sc">&lt;</span> before                                                                    </span>
<span id="cb18-143"><a href="#cb18-143"></a><span class="sc">&gt;</span> after                                                                     </span>
<span id="cb18-144"><a href="#cb18-144"></a><span class="sc">@</span><span class="er">@</span> <span class="dv">1</span>,<span class="dv">9</span> <span class="sc">/</span> <span class="dv">1</span>,<span class="dv">11</span> <span class="sc">@</span><span class="er">@</span>                                                            </span>
<span id="cb18-145"><a href="#cb18-145"></a>  {                                                                         </span>
<span id="cb18-146"><a href="#cb18-146"></a>    <span class="st">"input"</span><span class="sc">:</span> {                                                              </span>
<span id="cb18-147"><a href="#cb18-147"></a><span class="sc">&gt;</span>     <span class="st">"csv_input"</span><span class="sc">:</span> null,                                                    </span>
<span id="cb18-148"><a href="#cb18-148"></a>      <span class="st">"greeting_button_input"</span><span class="sc">:</span> <span class="dv">1</span>,                                           </span>
<span id="cb18-149"><a href="#cb18-149"></a>      <span class="st">"name_input"</span><span class="sc">:</span> <span class="st">""</span>                                                      </span>
<span id="cb18-150"><a href="#cb18-150"></a>    },                                                                      </span>
<span id="cb18-151"><a href="#cb18-151"></a>    <span class="st">"output"</span><span class="sc">:</span> {                                                             </span>
<span id="cb18-152"><a href="#cb18-152"></a><span class="sc">&lt;</span>     <span class="st">"greeting_output"</span><span class="sc">:</span> <span class="st">"Please type a name, then click the Greet button."</span> </span>
<span id="cb18-153"><a href="#cb18-153"></a><span class="sc">&gt;</span>     <span class="st">"greeting_output"</span><span class="sc">:</span> <span class="st">"Please type a name, then click the Greet button."</span>,</span>
<span id="cb18-154"><a href="#cb18-154"></a><span class="sc">&gt;</span>     <span class="st">"summary_table_output"</span><span class="sc">:</span> null                                          </span>
<span id="cb18-155"><a href="#cb18-155"></a>    },                                                                      </span>
<span id="cb18-156"><a href="#cb18-156"></a>    <span class="st">"export"</span><span class="sc">:</span> {                                                             </span>
<span id="cb18-157"><a href="#cb18-157"></a></span>
<span id="cb18-158"><a href="#cb18-158"></a><span class="fu">Warning</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">32</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> upload<span class="sc">-</span>cols<span class="sc">-</span>and<span class="sc">-</span>data</span>
<span id="cb18-159"><a href="#cb18-159"></a>Adding new file snapshot<span class="sc">:</span> <span class="st">'tests/testthat/_snaps/upload-cols-and-data-001_.png'</span></span>
<span id="cb18-160"><a href="#cb18-160"></a></span>
<span id="cb18-161"><a href="#cb18-161"></a><span class="fu">Warning</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">32</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> upload<span class="sc">-</span>cols<span class="sc">-</span>and<span class="sc">-</span>data</span>
<span id="cb18-162"><a href="#cb18-162"></a>Adding new file snapshot<span class="sc">:</span> <span class="st">'tests/testthat/_snaps/upload-cols-and-data-001.json'</span></span>
<span id="cb18-163"><a href="#cb18-163"></a>───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb18-164"><a href="#cb18-164"></a></span>
<span id="cb18-165"><a href="#cb18-165"></a>══ Results ════════════════════════════════════════════════════════════════════════════════════════════════════════════════════</span>
<span id="cb18-166"><a href="#cb18-166"></a>Duration<span class="sc">:</span> <span class="fl">7.9</span> s</span>
<span id="cb18-167"><a href="#cb18-167"></a></span>
<span id="cb18-168"><a href="#cb18-168"></a>── Failed tests ───────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span id="cb18-169"><a href="#cb18-169"></a><span class="fu">Failure</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">7</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> one<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-170"><a href="#cb18-170"></a>Snapshot of <span class="st">`</span><span class="at">file</span><span class="st">`</span> to <span class="st">'shinytest2/one-name-greeting-001.json'</span> has changed</span>
<span id="cb18-171"><a href="#cb18-171"></a>Run testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="st">'shinytest2/'</span>) to review changes</span>
<span id="cb18-172"><a href="#cb18-172"></a>Backtrace<span class="sc">:</span></span>
<span id="cb18-173"><a href="#cb18-173"></a>    ▆</span>
<span id="cb18-174"><a href="#cb18-174"></a> <span class="fl">1.</span> └─app<span class="sc">$</span><span class="fu">expect_values</span>() at test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">7</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb18-175"><a href="#cb18-175"></a> <span class="fl">2.</span>   └─shinytest2<span class="sc">:::</span><span class="fu">app_expect_values</span>(...)</span>
<span id="cb18-176"><a href="#cb18-176"></a> <span class="fl">3.</span>     └─shinytest2<span class="sc">:::</span><span class="fu">app__expect_snapshot_file</span>(...)</span>
<span id="cb18-177"><a href="#cb18-177"></a> <span class="fl">4.</span>       ├─base<span class="sc">::</span><span class="fu">withCallingHandlers</span>(...)</span>
<span id="cb18-178"><a href="#cb18-178"></a> <span class="fl">5.</span>       └─testthat<span class="sc">::</span><span class="fu">expect_snapshot_file</span>(...)</span>
<span id="cb18-179"><a href="#cb18-179"></a></span>
<span id="cb18-180"><a href="#cb18-180"></a><span class="fu">Failure</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">15</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> consecutive<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-181"><a href="#cb18-181"></a>Snapshot of <span class="st">`</span><span class="at">file</span><span class="st">`</span> to <span class="st">'shinytest2/consecutive-name-greeting-001.json'</span> has changed</span>
<span id="cb18-182"><a href="#cb18-182"></a>Run testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="st">'shinytest2/'</span>) to review changes</span>
<span id="cb18-183"><a href="#cb18-183"></a>Backtrace<span class="sc">:</span></span>
<span id="cb18-184"><a href="#cb18-184"></a>    ▆</span>
<span id="cb18-185"><a href="#cb18-185"></a> <span class="fl">1.</span> └─app<span class="sc">$</span><span class="fu">expect_values</span>() at test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">15</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb18-186"><a href="#cb18-186"></a> <span class="fl">2.</span>   └─shinytest2<span class="sc">:::</span><span class="fu">app_expect_values</span>(...)</span>
<span id="cb18-187"><a href="#cb18-187"></a> <span class="fl">3.</span>     └─shinytest2<span class="sc">:::</span><span class="fu">app__expect_snapshot_file</span>(...)</span>
<span id="cb18-188"><a href="#cb18-188"></a> <span class="fl">4.</span>       ├─base<span class="sc">::</span><span class="fu">withCallingHandlers</span>(...)</span>
<span id="cb18-189"><a href="#cb18-189"></a> <span class="fl">5.</span>       └─testthat<span class="sc">::</span><span class="fu">expect_snapshot_file</span>(...)</span>
<span id="cb18-190"><a href="#cb18-190"></a></span>
<span id="cb18-191"><a href="#cb18-191"></a><span class="fu">Failure</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">18</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> consecutive<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-192"><a href="#cb18-192"></a>Snapshot of <span class="st">`</span><span class="at">file</span><span class="st">`</span> to <span class="st">'shinytest2/consecutive-name-greeting-002.json'</span> has changed</span>
<span id="cb18-193"><a href="#cb18-193"></a>Run testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="st">'shinytest2/'</span>) to review changes</span>
<span id="cb18-194"><a href="#cb18-194"></a>Backtrace<span class="sc">:</span></span>
<span id="cb18-195"><a href="#cb18-195"></a>    ▆</span>
<span id="cb18-196"><a href="#cb18-196"></a> <span class="fl">1.</span> └─app<span class="sc">$</span><span class="fu">expect_values</span>() at test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">18</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb18-197"><a href="#cb18-197"></a> <span class="fl">2.</span>   └─shinytest2<span class="sc">:::</span><span class="fu">app_expect_values</span>(...)</span>
<span id="cb18-198"><a href="#cb18-198"></a> <span class="fl">3.</span>     └─shinytest2<span class="sc">:::</span><span class="fu">app__expect_snapshot_file</span>(...)</span>
<span id="cb18-199"><a href="#cb18-199"></a> <span class="fl">4.</span>       ├─base<span class="sc">::</span><span class="fu">withCallingHandlers</span>(...)</span>
<span id="cb18-200"><a href="#cb18-200"></a> <span class="fl">5.</span>       └─testthat<span class="sc">::</span><span class="fu">expect_snapshot_file</span>(...)</span>
<span id="cb18-201"><a href="#cb18-201"></a></span>
<span id="cb18-202"><a href="#cb18-202"></a><span class="fu">Failure</span> (test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">25</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">:</span> {shinytest2} recording<span class="sc">:</span> no<span class="sc">-</span>name<span class="sc">-</span>greeting</span>
<span id="cb18-203"><a href="#cb18-203"></a>Snapshot of <span class="st">`</span><span class="at">file</span><span class="st">`</span> to <span class="st">'shinytest2/no-name-greeting-001.json'</span> has changed</span>
<span id="cb18-204"><a href="#cb18-204"></a>Run testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="st">'shinytest2/'</span>) to review changes</span>
<span id="cb18-205"><a href="#cb18-205"></a>Backtrace<span class="sc">:</span></span>
<span id="cb18-206"><a href="#cb18-206"></a>    ▆</span>
<span id="cb18-207"><a href="#cb18-207"></a> <span class="fl">1.</span> └─app<span class="sc">$</span><span class="fu">expect_values</span>() at test<span class="sc">-</span>shinytest2.R<span class="sc">:</span><span class="dv">25</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb18-208"><a href="#cb18-208"></a> <span class="fl">2.</span>   └─shinytest2<span class="sc">:::</span><span class="fu">app_expect_values</span>(...)</span>
<span id="cb18-209"><a href="#cb18-209"></a> <span class="fl">3.</span>     └─shinytest2<span class="sc">:::</span><span class="fu">app__expect_snapshot_file</span>(...)</span>
<span id="cb18-210"><a href="#cb18-210"></a> <span class="fl">4.</span>       ├─base<span class="sc">::</span><span class="fu">withCallingHandlers</span>(...)</span>
<span id="cb18-211"><a href="#cb18-211"></a> <span class="fl">5.</span>       └─testthat<span class="sc">::</span><span class="fu">expect_snapshot_file</span>(...)</span>
<span id="cb18-212"><a href="#cb18-212"></a></span>
<span id="cb18-213"><a href="#cb18-213"></a>[ FAIL <span class="dv">4</span> <span class="sc">|</span> WARN <span class="dv">6</span> <span class="sc">|</span> SKIP <span class="dv">0</span> <span class="sc">|</span> PASS <span class="dv">1</span> ]</span>
<span id="cb18-214"><a href="#cb18-214"></a>Error<span class="sc">:</span> Test failures</span>
<span id="cb18-215"><a href="#cb18-215"></a>In addition<span class="sc">:</span> Warning messages<span class="sc">:</span></span>
<span id="cb18-216"><a href="#cb18-216"></a><span class="dv">1</span><span class="sc">:</span> package ‘testthat’ was built under R version <span class="dv">4</span>.<span class="fl">3.1</span> </span>
<span id="cb18-217"><a href="#cb18-217"></a><span class="dv">2</span><span class="sc">:</span> package ‘ggplot2’ was built under R version <span class="dv">4</span>.<span class="fl">3.1</span> </span>
<span id="cb18-218"><a href="#cb18-218"></a><span class="dv">3</span><span class="sc">:</span> package ‘dplyr’ was built under R version <span class="dv">4</span>.<span class="fl">3.1</span> </span>
<span id="cb18-219"><a href="#cb18-219"></a><span class="dv">4</span><span class="sc">:</span> package ‘stringr’ was built under R version <span class="dv">4</span>.<span class="fl">3.1</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="why-fail" class="slide level2" data-menu-title="Why did old tests fail?">
<h2></h2>
<p><span class="slide-title">Why did the old tests fail?</span></p>
<hr>
<p><br></p>
<div class="center-text body-text-m">
<p><em>What do you notice about each of the failed tests?</em></p>
</div>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p>For an easier time comparing diffs for each snapshot, open the snapshot reviewer (run in the Console):</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="at">path =</span> <span class="st">"testing-app/tests/testthat/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="body-text-s">
<p>Use the drop down to switch between snapshots. Don’t Accept any updates just yet.</p>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/part6/snapshot-review-dropdown.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="scope-too-large1" class="slide level2" data-menu-title="Scope too large 1">
<h2></h2>
<p><span class="slide-title">The scope of our assertions was too large</span></p>
<hr>
<p><strong>The scope of our test assertions was too large to isolate the behavior that we were looking to test.</strong></p>
<div class="fragment">
<p><span class="body-text-s">Let’s look at our <code>one-name-greeting-001_.png</code> snapshot as an example to better understand why our first four tests of feature 1 (greeting) failed:</span></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/part6/old.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/part6/new.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="scope-too-large2" class="slide level2" data-menu-title="Scope too large 2">
<h2></h2>
<p><span class="slide-title">The scope of our assertions was too large</span></p>
<hr>
<p><br></p>
<div class="center-text">
<p><strong>Our test failed, despite the consistent (expected) behavior of our test subject</strong> (in other words, our test failed, even though the expected output, “Hello Sam!” stayed the same.)</p>
</div>
<div class="fragment">
<!-- <br> -->
<!-- ::: {.center-text} -->
<!-- Therefore, our test failed due to changes outside of the test subject's (i.e. greeting's) behavior. -->
<!-- ::: -->
<!-- . . .  -->
<p><br></p>
<div class="center-text">
<p>Because our test failed due to changes outside of the test subject’s (i.e.&nbsp;greeting’s) behavior, <strong>we need to modify our tests so that they capture a <em>targeted value expectation</em>, rather than the state of our entire application</strong>. For example:</p>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb20" data-code-line-numbers="5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: one-name-greeting"</span>, {</span>
<span id="cb20-2"><a href="#cb20-2"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"one-name-greeting"</span>, <span class="at">height =</span> <span class="dv">815</span>, <span class="at">width =</span> <span class="dv">1276</span>)</span>
<span id="cb20-3"><a href="#cb20-3"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Sam"</span>)</span>
<span id="cb20-4"><a href="#cb20-4"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb20-5"><a href="#cb20-5"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>()</span>
<span id="cb20-6"><a href="#cb20-6"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb21" data-code-line-numbers="5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: one-name-greeting"</span>, {</span>
<span id="cb21-2"><a href="#cb21-2"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"one-name-greeting"</span>, <span class="at">height =</span> <span class="dv">815</span>, <span class="at">width =</span> <span class="dv">1276</span>)</span>
<span id="cb21-3"><a href="#cb21-3"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Sam"</span>)</span>
<span id="cb21-4"><a href="#cb21-4"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb21-5"><a href="#cb21-5"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb21-6"><a href="#cb21-6"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="targeted-expectations" class="slide level2" data-menu-title="Targetted expectations">
<h2></h2>
<p><span class="slide-title3">Update tests so that they make <em>targeted</em> value expectations</span></p>
<hr>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>testing-app/tests/testthat/test-shinytest2.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb22" data-code-line-numbers="7,15,18,25,32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">library</span>(shinytest2)</span>
<span id="cb22-2"><a href="#cb22-2"></a></span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: one-name-greeting"</span>, {</span>
<span id="cb22-4"><a href="#cb22-4"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"one-name-greeting"</span>, <span class="at">height =</span> <span class="dv">815</span>, <span class="at">width =</span> <span class="dv">1276</span>)</span>
<span id="cb22-5"><a href="#cb22-5"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Sam"</span>)</span>
<span id="cb22-6"><a href="#cb22-6"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb22-7"><a href="#cb22-7"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb22-8"><a href="#cb22-8"></a>})</span>
<span id="cb22-9"><a href="#cb22-9"></a></span>
<span id="cb22-10"><a href="#cb22-10"></a></span>
<span id="cb22-11"><a href="#cb22-11"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: consecutive-name-greeting"</span>, {</span>
<span id="cb22-12"><a href="#cb22-12"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"consecutive-name-greeting"</span>, <span class="at">height =</span> <span class="dv">961</span>, <span class="at">width =</span> <span class="dv">1322</span>)</span>
<span id="cb22-13"><a href="#cb22-13"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Sam"</span>)</span>
<span id="cb22-14"><a href="#cb22-14"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb22-15"><a href="#cb22-15"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb22-16"><a href="#cb22-16"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Kat"</span>)</span>
<span id="cb22-17"><a href="#cb22-17"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb22-18"><a href="#cb22-18"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb22-19"><a href="#cb22-19"></a>})</span>
<span id="cb22-20"><a href="#cb22-20"></a></span>
<span id="cb22-21"><a href="#cb22-21"></a></span>
<span id="cb22-22"><a href="#cb22-22"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: no-name-greeting"</span>, {</span>
<span id="cb22-23"><a href="#cb22-23"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"no-name-greeting"</span>, <span class="at">height =</span> <span class="dv">838</span>, <span class="at">width =</span> <span class="dv">1299</span>)</span>
<span id="cb22-24"><a href="#cb22-24"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb22-25"><a href="#cb22-25"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb22-26"><a href="#cb22-26"></a>})</span>
<span id="cb22-27"><a href="#cb22-27"></a></span>
<span id="cb22-28"><a href="#cb22-28"></a></span>
<span id="cb22-29"><a href="#cb22-29"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-cols-and-data"</span>, {</span>
<span id="cb22-30"><a href="#cb22-30"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-cols-and-data"</span>, <span class="at">height =</span> <span class="dv">734</span>, <span class="at">width =</span> <span class="dv">1119</span>)</span>
<span id="cb22-31"><a href="#cb22-31"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"cols-and-data1.csv"</span>)</span>
<span id="cb22-32"><a href="#cb22-32"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb22-33"><a href="#cb22-33"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="updated-tests-fail" class="slide level2" data-menu-title="Updated test fail">
<h2></h2>
<p><span class="slide-title">Our updated tests all failed</span></p>
<hr>
<p><br> <br> <br></p>
<p>After updating your tests, click <strong>Run Tests</strong>. They all should fail. You can check out the Tests &gt; Output tab to explore the diffs, or launch the snapshot reviewer:</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">snapshot_review</span>(<span class="at">path =</span> <span class="st">"testing-app/tests/testthat/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="center-text body-text-m">
<p>What do you notice about the diffs?</p>
</div>
</section>
<section id="specified-output" class="slide level2" data-menu-title="Specified output">
<h2></h2>
<p><span class="slide-title3">Targeted value expectations snapshot a specified <code>output</code>(s) . . .</span></p>
<hr>
<p>…as opposed to the default, which is to snapshot the entire application. <strong>This is what we want!</strong></p>
<p><br></p>

<img data-src="images/part6/targeted-value-expectations.gif" style="width:100.0%" class="r-stretch quarto-figure-center"><div class="center-text">
<p><strong>Accept all new snapshots</strong> – all tests should now pass when you rerun your test file.</p>
</div>
</section>
<section id="control-click" class="slide level2" data-menu-title="Control/command click targets">
<h2></h2>
<p><span class="slide-title3">Make a targeted value expectation using the test recorder</span></p>
<hr>
<p><span class="body-text-s">Let’s write a test that makes a targeted value expectation for our second assertion of feature 2 (copied below from our <a href="#/ft2-assertions">original table</a>):</span></p>
<ul>
<li><span class="body-text-s"><strong>Action(s):</strong> Click Browse &gt; Select CSV file with incorrect column headers</span></li>
<li><span class="body-text-s"><strong>Expectation:</strong> An error message, “Your CSV does not have the expected column headers” is returned</span></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<p><br></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/part6/command-click.gif" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><span class="teal-text"><strong>Steps:</strong></span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(1)</strong></span> Run <code>shinytest2::record_test("testing-app")</code> in the Console</span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(2</strong></span> Click Browse, select <code>incorrect-cols.csv</code> from your Desktop (or wherever you have it saved)</span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(3)</strong></span> Hold down the Command/Control button on your keyboard, then click on the <strong>output</strong> – for us, that’s the error message that is rendered in place of <code>summary_table_output</code></span></p>
<p><span class="body-text-s"><span class="teal-text"><strong>(4)</strong></span> Give the test a unique name (e.g.&nbsp;<code>upload-incorrect-cols</code>) &gt; click Save test and exit (tests should automatically execute and pass!)</span></p>
<!-- [[**(5)**]{.teal-text} The test recorder will quick, and your test will automatically execute (it should pass!)]{.body-text-s} -->
</div>
</div>
</section>
<section id="write-all-ft2-tests" class="slide level2" data-menu-title="Write remaining feature 2 tests">
<h2></h2>
<p><span class="slide-title3">Write tests for the remaining feature 2 assertions</span></p>
<hr>
<p><span class="body-text-s">When complete, your updated <code>test-shinytest2.R</code> file should look similar to this (and all tests should pass!):</span></p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>testing-app/tests/testthat/test-shinytest2.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb24" data-code-line-numbers="29-71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">library</span>(shinytest2)</span>
<span id="cb24-2"><a href="#cb24-2"></a></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: one-name-greeting"</span>, {</span>
<span id="cb24-4"><a href="#cb24-4"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"one-name-greeting"</span>, <span class="at">height =</span> <span class="dv">815</span>, <span class="at">width =</span> <span class="dv">1276</span>)</span>
<span id="cb24-5"><a href="#cb24-5"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Sam"</span>)</span>
<span id="cb24-6"><a href="#cb24-6"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb24-7"><a href="#cb24-7"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb24-8"><a href="#cb24-8"></a>})</span>
<span id="cb24-9"><a href="#cb24-9"></a></span>
<span id="cb24-10"><a href="#cb24-10"></a></span>
<span id="cb24-11"><a href="#cb24-11"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: consecutive-name-greeting"</span>, {</span>
<span id="cb24-12"><a href="#cb24-12"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"consecutive-name-greeting"</span>, <span class="at">height =</span> <span class="dv">961</span>, <span class="at">width =</span> <span class="dv">1322</span>)</span>
<span id="cb24-13"><a href="#cb24-13"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Sam"</span>)</span>
<span id="cb24-14"><a href="#cb24-14"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb24-15"><a href="#cb24-15"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb24-16"><a href="#cb24-16"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Kat"</span>)</span>
<span id="cb24-17"><a href="#cb24-17"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb24-18"><a href="#cb24-18"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb24-19"><a href="#cb24-19"></a>})</span>
<span id="cb24-20"><a href="#cb24-20"></a></span>
<span id="cb24-21"><a href="#cb24-21"></a></span>
<span id="cb24-22"><a href="#cb24-22"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: no-name-greeting"</span>, {</span>
<span id="cb24-23"><a href="#cb24-23"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"no-name-greeting"</span>, <span class="at">height =</span> <span class="dv">838</span>, <span class="at">width =</span> <span class="dv">1299</span>)</span>
<span id="cb24-24"><a href="#cb24-24"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb24-25"><a href="#cb24-25"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb24-26"><a href="#cb24-26"></a>})</span>
<span id="cb24-27"><a href="#cb24-27"></a></span>
<span id="cb24-28"><a href="#cb24-28"></a></span>
<span id="cb24-29"><a href="#cb24-29"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-cols-and-data"</span>, {</span>
<span id="cb24-30"><a href="#cb24-30"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-cols-and-data"</span>, <span class="at">height =</span> <span class="dv">734</span>, <span class="at">width =</span> <span class="dv">1119</span>)</span>
<span id="cb24-31"><a href="#cb24-31"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"cols-and-data1.csv"</span>)</span>
<span id="cb24-32"><a href="#cb24-32"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb24-33"><a href="#cb24-33"></a>})</span>
<span id="cb24-34"><a href="#cb24-34"></a></span>
<span id="cb24-35"><a href="#cb24-35"></a></span>
<span id="cb24-36"><a href="#cb24-36"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-incorrect-cols"</span>, {</span>
<span id="cb24-37"><a href="#cb24-37"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-incorrect-cols"</span>, <span class="at">height =</span> <span class="dv">754</span>, <span class="at">width =</span> <span class="dv">1139</span>)</span>
<span id="cb24-38"><a href="#cb24-38"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"incorrect-cols.csv"</span>)</span>
<span id="cb24-39"><a href="#cb24-39"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb24-40"><a href="#cb24-40"></a>})</span>
<span id="cb24-41"><a href="#cb24-41"></a></span>
<span id="cb24-42"><a href="#cb24-42"></a></span>
<span id="cb24-43"><a href="#cb24-43"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-empty"</span>, {</span>
<span id="cb24-44"><a href="#cb24-44"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-empty"</span>, <span class="at">height =</span> <span class="dv">734</span>, <span class="at">width =</span> <span class="dv">1119</span>)</span>
<span id="cb24-45"><a href="#cb24-45"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"empty.csv"</span>)</span>
<span id="cb24-46"><a href="#cb24-46"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb24-47"><a href="#cb24-47"></a>})</span>
<span id="cb24-48"><a href="#cb24-48"></a></span>
<span id="cb24-49"><a href="#cb24-49"></a></span>
<span id="cb24-50"><a href="#cb24-50"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-only-cols"</span>, {</span>
<span id="cb24-51"><a href="#cb24-51"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-only-cols"</span>, <span class="at">height =</span> <span class="dv">1048</span>, <span class="at">width =</span> <span class="dv">1441</span>)</span>
<span id="cb24-52"><a href="#cb24-52"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"only-cols.csv"</span>)</span>
<span id="cb24-53"><a href="#cb24-53"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb24-54"><a href="#cb24-54"></a>})</span>
<span id="cb24-55"><a href="#cb24-55"></a></span>
<span id="cb24-56"><a href="#cb24-56"></a></span>
<span id="cb24-57"><a href="#cb24-57"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-only-data"</span>, {</span>
<span id="cb24-58"><a href="#cb24-58"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-only-data"</span>, <span class="at">height =</span> <span class="dv">1048</span>, <span class="at">width =</span> <span class="dv">1441</span>)</span>
<span id="cb24-59"><a href="#cb24-59"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"only-data.csv"</span>)</span>
<span id="cb24-60"><a href="#cb24-60"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb24-61"><a href="#cb24-61"></a>})</span>
<span id="cb24-62"><a href="#cb24-62"></a></span>
<span id="cb24-63"><a href="#cb24-63"></a></span>
<span id="cb24-64"><a href="#cb24-64"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-consecutive-correct-files"</span>, {</span>
<span id="cb24-65"><a href="#cb24-65"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-consecutive-correct-files"</span>, <span class="at">height =</span> <span class="dv">1048</span>, </span>
<span id="cb24-66"><a href="#cb24-66"></a>      <span class="at">width =</span> <span class="dv">1441</span>)</span>
<span id="cb24-67"><a href="#cb24-67"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"cols-and-data1.csv"</span>)</span>
<span id="cb24-68"><a href="#cb24-68"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb24-69"><a href="#cb24-69"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"cols-and-data2.csv"</span>)</span>
<span id="cb24-70"><a href="#cb24-70"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb24-71"><a href="#cb24-71"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="feature3-code" class="slide level2" data-menu-title="Feature 3 code">
<h2></h2>
<p><span class="slide-title">Your boss requests one final feature</span></p>
<hr>
<p><span class="body-text-s">You’re tasked with creating a scatterplot of penguin bill depths by bill lengths, with a pickerInput that allows users to filter the data by species:</span></p>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1"><code>global.R</code></a></li><li><a href="#tabset-3-2"><code>ui.R</code></a></li><li><a href="#tabset-3-3"><code>server.R</code></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># load libraries ----</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="fu">library</span>(shiny)</span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="fu">library</span>(shinyWidgets)</span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="fu">library</span>(palmerpenguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb26-2"><a href="#cb26-2"></a>  </span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="co"># Feature 1 ------------------------------------------------------------------</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>  </span>
<span id="cb26-5"><a href="#cb26-5"></a>  <span class="fu">h3</span>(<span class="st">"Feature 1"</span>),</span>
<span id="cb26-6"><a href="#cb26-6"></a>  </span>
<span id="cb26-7"><a href="#cb26-7"></a>  <span class="co"># fluidRow (Feature 1: greeting) ----</span></span>
<span id="cb26-8"><a href="#cb26-8"></a>  <span class="fu">fluidRow</span>(</span>
<span id="cb26-9"><a href="#cb26-9"></a>    </span>
<span id="cb26-10"><a href="#cb26-10"></a>    <span class="co"># greeting sidebarLayout ----</span></span>
<span id="cb26-11"><a href="#cb26-11"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb26-12"><a href="#cb26-12"></a>      </span>
<span id="cb26-13"><a href="#cb26-13"></a>      <span class="co"># greeting sidebarPanel ----</span></span>
<span id="cb26-14"><a href="#cb26-14"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb26-15"><a href="#cb26-15"></a>        </span>
<span id="cb26-16"><a href="#cb26-16"></a>        <span class="fu">textInput</span>(<span class="at">inputId =</span> <span class="st">"name_input"</span>,</span>
<span id="cb26-17"><a href="#cb26-17"></a>                  <span class="at">label =</span> <span class="st">"What is your name?"</span>),</span>
<span id="cb26-18"><a href="#cb26-18"></a>        </span>
<span id="cb26-19"><a href="#cb26-19"></a>        <span class="fu">actionButton</span>(<span class="at">inputId =</span> <span class="st">"greeting_button_input"</span>,</span>
<span id="cb26-20"><a href="#cb26-20"></a>                     <span class="at">label =</span> <span class="st">"Greet"</span>),</span>
<span id="cb26-21"><a href="#cb26-21"></a>        </span>
<span id="cb26-22"><a href="#cb26-22"></a>      ), <span class="co"># </span><span class="re">END</span><span class="co"> greeting sidebarPanel</span></span>
<span id="cb26-23"><a href="#cb26-23"></a>      </span>
<span id="cb26-24"><a href="#cb26-24"></a>      <span class="co"># greeting mainPanel ----</span></span>
<span id="cb26-25"><a href="#cb26-25"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb26-26"><a href="#cb26-26"></a>        </span>
<span id="cb26-27"><a href="#cb26-27"></a>        <span class="fu">textOutput</span>(<span class="at">outputId =</span> <span class="st">"greeting_output"</span>),</span>
<span id="cb26-28"><a href="#cb26-28"></a>        </span>
<span id="cb26-29"><a href="#cb26-29"></a>      ) <span class="co"># </span><span class="re">END</span><span class="co"> greeting mainPanel</span></span>
<span id="cb26-30"><a href="#cb26-30"></a>      </span>
<span id="cb26-31"><a href="#cb26-31"></a>    ) <span class="co"># </span><span class="re">END</span><span class="co"> greeting sidebarLayout</span></span>
<span id="cb26-32"><a href="#cb26-32"></a>    </span>
<span id="cb26-33"><a href="#cb26-33"></a>  ), <span class="co"># </span><span class="re">END</span><span class="co"> fluidRow (Feature 1: greeting)</span></span>
<span id="cb26-34"><a href="#cb26-34"></a>  </span>
<span id="cb26-35"><a href="#cb26-35"></a>  tags<span class="sc">$</span><span class="fu">hr</span>(),</span>
<span id="cb26-36"><a href="#cb26-36"></a>  </span>
<span id="cb26-37"><a href="#cb26-37"></a>  <span class="co"># Feature 2 ------------------------------------------------------------------</span></span>
<span id="cb26-38"><a href="#cb26-38"></a>  </span>
<span id="cb26-39"><a href="#cb26-39"></a>  <span class="fu">h3</span>(<span class="st">"Feature 2"</span>),</span>
<span id="cb26-40"><a href="#cb26-40"></a>  </span>
<span id="cb26-41"><a href="#cb26-41"></a>  <span class="co"># fluidRow (Feature 2: file upload) -----</span></span>
<span id="cb26-42"><a href="#cb26-42"></a>  <span class="fu">fluidRow</span>(</span>
<span id="cb26-43"><a href="#cb26-43"></a>    </span>
<span id="cb26-44"><a href="#cb26-44"></a>    <span class="co"># file upload sidebarLayout ----</span></span>
<span id="cb26-45"><a href="#cb26-45"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb26-46"><a href="#cb26-46"></a>      </span>
<span id="cb26-47"><a href="#cb26-47"></a>      <span class="co"># file upload sidebarPanel ----</span></span>
<span id="cb26-48"><a href="#cb26-48"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb26-49"><a href="#cb26-49"></a>        </span>
<span id="cb26-50"><a href="#cb26-50"></a>        <span class="co"># upload fileInput -----</span></span>
<span id="cb26-51"><a href="#cb26-51"></a>        <span class="fu">fileInput</span>(<span class="at">inputId =</span> <span class="st">"csv_input"</span>,</span>
<span id="cb26-52"><a href="#cb26-52"></a>                  <span class="at">label =</span> <span class="st">"Upload your CSV file:"</span>,</span>
<span id="cb26-53"><a href="#cb26-53"></a>                  <span class="at">multiple =</span> <span class="cn">FALSE</span>,</span>
<span id="cb26-54"><a href="#cb26-54"></a>                  <span class="at">accept =</span> <span class="fu">c</span>(<span class="st">".csv"</span>),</span>
<span id="cb26-55"><a href="#cb26-55"></a>                  <span class="at">buttonLabel =</span> <span class="st">"Browse"</span>,</span>
<span id="cb26-56"><a href="#cb26-56"></a>                  <span class="at">placeholder =</span> <span class="st">"No file selected"</span>), <span class="co"># </span><span class="re">END</span><span class="co"> upload fileInput</span></span>
<span id="cb26-57"><a href="#cb26-57"></a>        </span>
<span id="cb26-58"><a href="#cb26-58"></a>      ), <span class="co"># </span><span class="re">END</span><span class="co"> file upload sidebarPanel</span></span>
<span id="cb26-59"><a href="#cb26-59"></a>      </span>
<span id="cb26-60"><a href="#cb26-60"></a>      <span class="co"># fileInput mainPanel ----</span></span>
<span id="cb26-61"><a href="#cb26-61"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb26-62"><a href="#cb26-62"></a>        </span>
<span id="cb26-63"><a href="#cb26-63"></a>        <span class="fu">tableOutput</span>(<span class="at">outputId =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb26-64"><a href="#cb26-64"></a>        </span>
<span id="cb26-65"><a href="#cb26-65"></a>      ) <span class="co"># </span><span class="re">END</span><span class="co"> file upload mainPanel</span></span>
<span id="cb26-66"><a href="#cb26-66"></a>      </span>
<span id="cb26-67"><a href="#cb26-67"></a>    ) <span class="co"># </span><span class="re">END</span><span class="co"> file upload sidebarLayout</span></span>
<span id="cb26-68"><a href="#cb26-68"></a>    </span>
<span id="cb26-69"><a href="#cb26-69"></a>  ), <span class="co"># </span><span class="re">END</span><span class="co"> fluidRow (Feature 2: file upload)</span></span>
<span id="cb26-70"><a href="#cb26-70"></a>  </span>
<span id="cb26-71"><a href="#cb26-71"></a>  tags<span class="sc">$</span><span class="fu">hr</span>(),</span>
<span id="cb26-72"><a href="#cb26-72"></a>  </span>
<span id="cb26-73"><a href="#cb26-73"></a>  <span class="co"># Feature 3 ------------------------------------------------------------------</span></span>
<span id="cb26-74"><a href="#cb26-74"></a>  </span>
<span id="cb26-75"><a href="#cb26-75"></a>  <span class="fu">h3</span>(<span class="st">"Feature 3"</span>),</span>
<span id="cb26-76"><a href="#cb26-76"></a>  </span>
<span id="cb26-77"><a href="#cb26-77"></a>  <span class="co"># fluidRow (Feature 3: plot) -----</span></span>
<span id="cb26-78"><a href="#cb26-78"></a>  <span class="fu">fluidRow</span>(</span>
<span id="cb26-79"><a href="#cb26-79"></a>    </span>
<span id="cb26-80"><a href="#cb26-80"></a>    <span class="co"># plot sidebarLayout ----</span></span>
<span id="cb26-81"><a href="#cb26-81"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb26-82"><a href="#cb26-82"></a>      </span>
<span id="cb26-83"><a href="#cb26-83"></a>      <span class="co"># plot sidebarPanel ----</span></span>
<span id="cb26-84"><a href="#cb26-84"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb26-85"><a href="#cb26-85"></a>        </span>
<span id="cb26-86"><a href="#cb26-86"></a>        <span class="co"># penguin spp pickerInput -----</span></span>
<span id="cb26-87"><a href="#cb26-87"></a>        <span class="fu">pickerInput</span>(<span class="at">inputId =</span> <span class="st">"penguinSpp_scatterplot_input"</span>, <span class="at">label =</span> <span class="st">"Select species:"</span>,</span>
<span id="cb26-88"><a href="#cb26-88"></a>                    <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"Adelie"</span>, <span class="st">"Chinstrap"</span>, <span class="st">"Gentoo"</span>),</span>
<span id="cb26-89"><a href="#cb26-89"></a>                    <span class="at">selected =</span> <span class="fu">c</span>(<span class="st">"Adelie"</span>, <span class="st">"Chinstrap"</span>, <span class="st">"Gentoo"</span>),</span>
<span id="cb26-90"><a href="#cb26-90"></a>                    <span class="at">options =</span> <span class="fu">pickerOptions</span>(<span class="at">actionsBox =</span> <span class="cn">TRUE</span>),</span>
<span id="cb26-91"><a href="#cb26-91"></a>                    <span class="at">multiple =</span> <span class="cn">TRUE</span>), <span class="co"># </span><span class="re">END</span><span class="co"> penguin spp pickerInput</span></span>
<span id="cb26-92"><a href="#cb26-92"></a>        </span>
<span id="cb26-93"><a href="#cb26-93"></a>      ), <span class="co"># </span><span class="re">END</span><span class="co"> plot sidebarPanel</span></span>
<span id="cb26-94"><a href="#cb26-94"></a>      </span>
<span id="cb26-95"><a href="#cb26-95"></a>      <span class="co"># plot mainPanel ----</span></span>
<span id="cb26-96"><a href="#cb26-96"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb26-97"><a href="#cb26-97"></a>        </span>
<span id="cb26-98"><a href="#cb26-98"></a>        <span class="fu">plotOutput</span>(<span class="at">outputId =</span> <span class="st">"scatterplot_output"</span>)</span>
<span id="cb26-99"><a href="#cb26-99"></a>        </span>
<span id="cb26-100"><a href="#cb26-100"></a>      ) <span class="co"># </span><span class="re">END</span><span class="co"> plot mainPanel</span></span>
<span id="cb26-101"><a href="#cb26-101"></a>      </span>
<span id="cb26-102"><a href="#cb26-102"></a>    ) <span class="co"># </span><span class="re">END</span><span class="co"> plot sidebarLayout</span></span>
<span id="cb26-103"><a href="#cb26-103"></a>    </span>
<span id="cb26-104"><a href="#cb26-104"></a>  ) <span class="co"># </span><span class="re">END</span><span class="co"> fluidRow (Feature 3: plot)</span></span>
<span id="cb26-105"><a href="#cb26-105"></a>  </span>
<span id="cb26-106"><a href="#cb26-106"></a>) <span class="co"># </span><span class="re">END</span><span class="co"> fluidPage </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-3">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb27-2"><a href="#cb27-2"></a>  </span>
<span id="cb27-3"><a href="#cb27-3"></a>  <span class="co"># Feature 1 ------------------------------------------------------------------</span></span>
<span id="cb27-4"><a href="#cb27-4"></a>  </span>
<span id="cb27-5"><a href="#cb27-5"></a>  <span class="co"># wait for user to click the Greet button before returning the message ----</span></span>
<span id="cb27-6"><a href="#cb27-6"></a>  <span class="fu">observe</span>({</span>
<span id="cb27-7"><a href="#cb27-7"></a>    </span>
<span id="cb27-8"><a href="#cb27-8"></a>    <span class="co"># if the user does not type anything, return the message, "Please type a name, then click the Greet button." ----</span></span>
<span id="cb27-9"><a href="#cb27-9"></a>    <span class="cf">if</span> (<span class="fu">nchar</span>(input<span class="sc">$</span>name_input) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb27-10"><a href="#cb27-10"></a>      output<span class="sc">$</span>greeting_output <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb27-11"><a href="#cb27-11"></a>        <span class="st">"Please type a name, then click the Greet button."</span></span>
<span id="cb27-12"><a href="#cb27-12"></a>      })</span>
<span id="cb27-13"><a href="#cb27-13"></a>      </span>
<span id="cb27-14"><a href="#cb27-14"></a>      <span class="co"># if the user does type a name, return the greeting, "Hello [name]!" ----</span></span>
<span id="cb27-15"><a href="#cb27-15"></a>    } <span class="cf">else</span> {</span>
<span id="cb27-16"><a href="#cb27-16"></a>      output<span class="sc">$</span>greeting_output <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb27-17"><a href="#cb27-17"></a>        <span class="fu">paste0</span>(<span class="st">"Hello "</span>, <span class="fu">isolate</span>(input<span class="sc">$</span>name_input), <span class="st">"!"</span>)</span>
<span id="cb27-18"><a href="#cb27-18"></a>      })</span>
<span id="cb27-19"><a href="#cb27-19"></a>    }</span>
<span id="cb27-20"><a href="#cb27-20"></a>  }) <span class="sc">|&gt;</span></span>
<span id="cb27-21"><a href="#cb27-21"></a>    </span>
<span id="cb27-22"><a href="#cb27-22"></a>    <span class="co"># </span><span class="al">TODO</span><span class="co">: add description here ----</span></span>
<span id="cb27-23"><a href="#cb27-23"></a>    <span class="fu">bindEvent</span>(input<span class="sc">$</span>greeting_button_input)</span>
<span id="cb27-24"><a href="#cb27-24"></a>  </span>
<span id="cb27-25"><a href="#cb27-25"></a>  <span class="co"># Feature 2 ------------------------------------------------------------------</span></span>
<span id="cb27-26"><a href="#cb27-26"></a>  </span>
<span id="cb27-27"><a href="#cb27-27"></a>  <span class="co"># file upload ----</span></span>
<span id="cb27-28"><a href="#cb27-28"></a>  output<span class="sc">$</span>summary_table_output <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb27-29"><a href="#cb27-29"></a>    </span>
<span id="cb27-30"><a href="#cb27-30"></a>    <span class="co"># </span><span class="al">NOTE</span><span class="co">: `input$csv_input` will be NULL initially</span></span>
<span id="cb27-31"><a href="#cb27-31"></a>    <span class="co"># after user selects / uploads a file, it will be a df with 'name', 'size', 'type', 'datapath' cols</span></span>
<span id="cb27-32"><a href="#cb27-32"></a>    <span class="co"># 'datapath' col will contain the local filenames where data can be found</span></span>
<span id="cb27-33"><a href="#cb27-33"></a>    <span class="co"># see: https://shiny.posit.co/r/reference/shiny/1.4.0/fileinput</span></span>
<span id="cb27-34"><a href="#cb27-34"></a>    </span>
<span id="cb27-35"><a href="#cb27-35"></a>    <span class="co"># save input value to object named `inputFile` ----</span></span>
<span id="cb27-36"><a href="#cb27-36"></a>    inputFile <span class="ot">&lt;-</span> input<span class="sc">$</span>csv_input</span>
<span id="cb27-37"><a href="#cb27-37"></a>    </span>
<span id="cb27-38"><a href="#cb27-38"></a>    <span class="co"># if a file has not been uploaded yet, don't return / print anything ----</span></span>
<span id="cb27-39"><a href="#cb27-39"></a>    <span class="cf">if</span>(<span class="fu">is.null</span>(inputFile))</span>
<span id="cb27-40"><a href="#cb27-40"></a>      <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb27-41"><a href="#cb27-41"></a>    </span>
<span id="cb27-42"><a href="#cb27-42"></a>    <span class="co"># read in file using it's datapath ----</span></span>
<span id="cb27-43"><a href="#cb27-43"></a>    df_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(inputFile<span class="sc">$</span>datapath)</span>
<span id="cb27-44"><a href="#cb27-44"></a>    </span>
<span id="cb27-45"><a href="#cb27-45"></a>    <span class="co"># validate that the uploaded CSV has the expected column names ----</span></span>
<span id="cb27-46"><a href="#cb27-46"></a>    required_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"temp_c"</span>, <span class="st">"precip_cm"</span>, <span class="st">"wind_kmhr"</span>, <span class="st">"pressure_inhg"</span>)</span>
<span id="cb27-47"><a href="#cb27-47"></a>    column_names <span class="ot">&lt;-</span> <span class="fu">colnames</span>(df_raw)</span>
<span id="cb27-48"><a href="#cb27-48"></a>    <span class="fu">validate</span>(</span>
<span id="cb27-49"><a href="#cb27-49"></a>      <span class="fu">need</span>(<span class="fu">all</span>(required_cols <span class="sc">%in%</span> column_names), <span class="st">"Your CSV does not have the expected column headers."</span>)</span>
<span id="cb27-50"><a href="#cb27-50"></a>    )</span>
<span id="cb27-51"><a href="#cb27-51"></a>    </span>
<span id="cb27-52"><a href="#cb27-52"></a>    <span class="co"># return summarized data in a table ----</span></span>
<span id="cb27-53"><a href="#cb27-53"></a>    df_summary <span class="ot">&lt;-</span> df_raw <span class="sc">|&gt;</span></span>
<span id="cb27-54"><a href="#cb27-54"></a>      <span class="fu">summarize</span>(</span>
<span id="cb27-55"><a href="#cb27-55"></a>        <span class="at">avg_temp =</span> <span class="fu">mean</span>(temp_c),</span>
<span id="cb27-56"><a href="#cb27-56"></a>        <span class="at">avg_precip =</span> <span class="fu">mean</span>(precip_cm),</span>
<span id="cb27-57"><a href="#cb27-57"></a>        <span class="at">avg_wind =</span> <span class="fu">mean</span>(wind_kmhr),</span>
<span id="cb27-58"><a href="#cb27-58"></a>        <span class="at">avg_pressure =</span> <span class="fu">mean</span>(pressure_inhg),</span>
<span id="cb27-59"><a href="#cb27-59"></a>        <span class="at">tot_num_obs =</span> <span class="fu">length</span>(temp_c)</span>
<span id="cb27-60"><a href="#cb27-60"></a>      ) <span class="sc">|&gt;</span></span>
<span id="cb27-61"><a href="#cb27-61"></a>      <span class="fu">rename</span>(<span class="st">"Mean Temperature (C)"</span> <span class="ot">=</span> <span class="st">"avg_temp"</span>,</span>
<span id="cb27-62"><a href="#cb27-62"></a>             <span class="st">"Mean Precipitation (cm)"</span> <span class="ot">=</span> <span class="st">"avg_precip"</span>,</span>
<span id="cb27-63"><a href="#cb27-63"></a>             <span class="st">"Mean Wind Speed (km/hr)"</span> <span class="ot">=</span> <span class="st">"avg_wind"</span>,</span>
<span id="cb27-64"><a href="#cb27-64"></a>             <span class="st">"Mean Pressure (inHg)"</span> <span class="ot">=</span> <span class="st">"avg_pressure"</span>,</span>
<span id="cb27-65"><a href="#cb27-65"></a>             <span class="st">"Total Number of Observations"</span> <span class="ot">=</span> <span class="st">"tot_num_obs"</span>)</span>
<span id="cb27-66"><a href="#cb27-66"></a>    <span class="fu">return</span>(df_summary)</span>
<span id="cb27-67"><a href="#cb27-67"></a>    </span>
<span id="cb27-68"><a href="#cb27-68"></a>  })</span>
<span id="cb27-69"><a href="#cb27-69"></a>  </span>
<span id="cb27-70"><a href="#cb27-70"></a>  <span class="co"># Feature 3 ------------------------------------------------------------------</span></span>
<span id="cb27-71"><a href="#cb27-71"></a>  </span>
<span id="cb27-72"><a href="#cb27-72"></a>  <span class="co"># filter penguin spp (scatterplot) ----</span></span>
<span id="cb27-73"><a href="#cb27-73"></a>  filtered_spp_scatterplot_df <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb27-74"><a href="#cb27-74"></a>    </span>
<span id="cb27-75"><a href="#cb27-75"></a>    <span class="fu">validate</span>(</span>
<span id="cb27-76"><a href="#cb27-76"></a>      <span class="fu">need</span>(<span class="fu">length</span>(input<span class="sc">$</span>penguinSpp_scatterplot_input) <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"Please select at least one penguin species to visualize data for."</span>))</span>
<span id="cb27-77"><a href="#cb27-77"></a>    </span>
<span id="cb27-78"><a href="#cb27-78"></a>    penguins <span class="sc">|&gt;</span></span>
<span id="cb27-79"><a href="#cb27-79"></a>      <span class="fu">filter</span>(species <span class="sc">%in%</span> input<span class="sc">$</span>penguinSpp_scatterplot_input)</span>
<span id="cb27-80"><a href="#cb27-80"></a>    </span>
<span id="cb27-81"><a href="#cb27-81"></a>  })</span>
<span id="cb27-82"><a href="#cb27-82"></a>  </span>
<span id="cb27-83"><a href="#cb27-83"></a>  <span class="co"># render scatterplot ----</span></span>
<span id="cb27-84"><a href="#cb27-84"></a>  output<span class="sc">$</span>scatterplot_output <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb27-85"><a href="#cb27-85"></a>    </span>
<span id="cb27-86"><a href="#cb27-86"></a>    <span class="fu">ggplot</span>(<span class="fu">na.omit</span>(<span class="fu">filtered_spp_scatterplot_df</span>()),</span>
<span id="cb27-87"><a href="#cb27-87"></a>           <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> bill_depth_mm,</span>
<span id="cb27-88"><a href="#cb27-88"></a>               <span class="at">color =</span> species, <span class="at">shape =</span> species)) <span class="sc">+</span></span>
<span id="cb27-89"><a href="#cb27-89"></a>      <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb27-90"><a href="#cb27-90"></a>      <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="fu">aes</span>(<span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb27-91"><a href="#cb27-91"></a>      <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Adelie"</span> <span class="ot">=</span> <span class="st">"darkorange"</span>, <span class="st">"Chinstrap"</span> <span class="ot">=</span> <span class="st">"purple"</span>, <span class="st">"Gentoo"</span> <span class="ot">=</span> <span class="st">"cyan4"</span>)) <span class="sc">+</span></span>
<span id="cb27-92"><a href="#cb27-92"></a>      <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Adelie"</span> <span class="ot">=</span> <span class="dv">19</span>, <span class="st">"Chinstrap"</span> <span class="ot">=</span> <span class="dv">17</span>, <span class="st">"Gentoo"</span> <span class="ot">=</span> <span class="dv">15</span>)) <span class="sc">+</span></span>
<span id="cb27-93"><a href="#cb27-93"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Flipper length (mm)"</span>, <span class="at">y =</span> <span class="st">"Bill length (mm)"</span>,</span>
<span id="cb27-94"><a href="#cb27-94"></a>           <span class="at">color =</span> <span class="st">"Penguin species"</span>, <span class="at">shape =</span> <span class="st">"Penguin species"</span>) <span class="sc">+</span></span>
<span id="cb27-95"><a href="#cb27-95"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb27-96"><a href="#cb27-96"></a>    </span>
<span id="cb27-97"><a href="#cb27-97"></a>  })</span>
<span id="cb27-98"><a href="#cb27-98"></a>  </span>
<span id="cb27-99"><a href="#cb27-99"></a>} <span class="co"># </span><span class="re">END</span><span class="co"> server</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="run-ft3-app" class="slide level2" data-menu-title="Run the app">
<h2></h2>
<p><span class="slide-title">Run your app &amp; try out the latest feature</span></p>
<hr>
<p>Try out the pickerInput and identify different actions / scenarios that a user may encounter which you’d like to write tests for.</p>
<p><br></p>

<img data-src="images/part6/ft3-plot.gif" style="width:100.0%" class="r-stretch quarto-figure-center"></section>
<section id="feature3-assertions" class="slide level2" data-menu-title="Feature 3 assertions">
<h2></h2>
<p><span class="slide-title">We’ll write tests for the following assertions</span></p>
<hr>
<table>
<colgroup>
<col style="width: 21%">
<col style="width: 78%">
</colgroup>
<thead>
<tr class="header">
<th>Action(s)</th>
<th>Expectation(s)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Select all 3 species (no action / default state)</td>
<td>A scatterplot with all three species’ data is rendered</td>
</tr>
<tr class="even">
<td>Deselect Adelie</td>
<td>A scatterplot with just Gentoo &amp; Chinstrap data is rendered</td>
</tr>
<tr class="odd">
<td>Click Deselect All &gt; Select Gentoo &gt; Click Select All</td>
<td>An error message, “Please select at least one penguin species to visualize data for.” is returned &gt; A scatterplot with just Gentoo data is rendered &gt; A scatterplot with all three species’ data is rendered</td>
</tr>
</tbody>
</table>
<p><br></p>
<div class="center-text body-text-m">
<p>Give it a try on your own, and remember to make <em>targeted value expectations</em>!</p>
</div>
<div class="center-text">
<p><em>NOTE: You’ll likely encounter this popup each time you click on the <code>pickerInput</code> – click <strong>Record</strong>:</em></p>
</div>

<img data-src="images/part6/input-binding.png" style="width:30.0%" class="r-stretch quarto-figure-center"><div class="footer">
<p>Read more about <a href="https://rstudio.github.io/shinytest2/articles/in-depth.html?q=input%20binding#inputs-without-input-bindings">input bindings</a> in the <code>{shinytest2}</code> documentation.</p>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_d3bf6817" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:2em;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="feature3-tests" class="slide level2" data-menu-title="Feature 3 tests">
<h2></h2>
<p><span class="slide-title">Write your tests for feature 3</span></p>
<hr>
<p>When complete, your updated <code>test-shinytest2.R</code> file should look similar to this (and all tests should pass!):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">library</span>(shinytest2)</span>
<span id="cb28-2"><a href="#cb28-2"></a></span>
<span id="cb28-3"><a href="#cb28-3"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: one-name-greeting"</span>, {</span>
<span id="cb28-4"><a href="#cb28-4"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"one-name-greeting"</span>, <span class="at">height =</span> <span class="dv">815</span>, <span class="at">width =</span> <span class="dv">1276</span>)</span>
<span id="cb28-5"><a href="#cb28-5"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Sam"</span>)</span>
<span id="cb28-6"><a href="#cb28-6"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb28-7"><a href="#cb28-7"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb28-8"><a href="#cb28-8"></a>})</span>
<span id="cb28-9"><a href="#cb28-9"></a></span>
<span id="cb28-10"><a href="#cb28-10"></a></span>
<span id="cb28-11"><a href="#cb28-11"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: consecutive-name-greeting"</span>, {</span>
<span id="cb28-12"><a href="#cb28-12"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"consecutive-name-greeting"</span>, <span class="at">height =</span> <span class="dv">961</span>, <span class="at">width =</span> <span class="dv">1322</span>)</span>
<span id="cb28-13"><a href="#cb28-13"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Sam"</span>)</span>
<span id="cb28-14"><a href="#cb28-14"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb28-15"><a href="#cb28-15"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb28-16"><a href="#cb28-16"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">name_input =</span> <span class="st">"Kat"</span>)</span>
<span id="cb28-17"><a href="#cb28-17"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb28-18"><a href="#cb28-18"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb28-19"><a href="#cb28-19"></a>})</span>
<span id="cb28-20"><a href="#cb28-20"></a></span>
<span id="cb28-21"><a href="#cb28-21"></a></span>
<span id="cb28-22"><a href="#cb28-22"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: no-name-greeting"</span>, {</span>
<span id="cb28-23"><a href="#cb28-23"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"no-name-greeting"</span>, <span class="at">height =</span> <span class="dv">838</span>, <span class="at">width =</span> <span class="dv">1299</span>)</span>
<span id="cb28-24"><a href="#cb28-24"></a>  app<span class="sc">$</span><span class="fu">click</span>(<span class="st">"greeting_button_input"</span>)</span>
<span id="cb28-25"><a href="#cb28-25"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"greeting_output"</span>)</span>
<span id="cb28-26"><a href="#cb28-26"></a>})</span>
<span id="cb28-27"><a href="#cb28-27"></a></span>
<span id="cb28-28"><a href="#cb28-28"></a></span>
<span id="cb28-29"><a href="#cb28-29"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-cols-and-data"</span>, {</span>
<span id="cb28-30"><a href="#cb28-30"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-cols-and-data"</span>, <span class="at">height =</span> <span class="dv">734</span>, <span class="at">width =</span> <span class="dv">1119</span>)</span>
<span id="cb28-31"><a href="#cb28-31"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"cols-and-data1.csv"</span>)</span>
<span id="cb28-32"><a href="#cb28-32"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb28-33"><a href="#cb28-33"></a>})</span>
<span id="cb28-34"><a href="#cb28-34"></a></span>
<span id="cb28-35"><a href="#cb28-35"></a></span>
<span id="cb28-36"><a href="#cb28-36"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-incorrect-cols"</span>, {</span>
<span id="cb28-37"><a href="#cb28-37"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-incorrect-cols"</span>, <span class="at">height =</span> <span class="dv">754</span>, <span class="at">width =</span> <span class="dv">1139</span>)</span>
<span id="cb28-38"><a href="#cb28-38"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"incorrect-cols.csv"</span>)</span>
<span id="cb28-39"><a href="#cb28-39"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb28-40"><a href="#cb28-40"></a>})</span>
<span id="cb28-41"><a href="#cb28-41"></a></span>
<span id="cb28-42"><a href="#cb28-42"></a></span>
<span id="cb28-43"><a href="#cb28-43"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-empty"</span>, {</span>
<span id="cb28-44"><a href="#cb28-44"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-empty"</span>, <span class="at">height =</span> <span class="dv">734</span>, <span class="at">width =</span> <span class="dv">1119</span>)</span>
<span id="cb28-45"><a href="#cb28-45"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"empty.csv"</span>)</span>
<span id="cb28-46"><a href="#cb28-46"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb28-47"><a href="#cb28-47"></a>})</span>
<span id="cb28-48"><a href="#cb28-48"></a></span>
<span id="cb28-49"><a href="#cb28-49"></a></span>
<span id="cb28-50"><a href="#cb28-50"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-only-cols"</span>, {</span>
<span id="cb28-51"><a href="#cb28-51"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-only-cols"</span>, <span class="at">height =</span> <span class="dv">1048</span>, <span class="at">width =</span> <span class="dv">1441</span>)</span>
<span id="cb28-52"><a href="#cb28-52"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"only-cols.csv"</span>)</span>
<span id="cb28-53"><a href="#cb28-53"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb28-54"><a href="#cb28-54"></a>})</span>
<span id="cb28-55"><a href="#cb28-55"></a></span>
<span id="cb28-56"><a href="#cb28-56"></a></span>
<span id="cb28-57"><a href="#cb28-57"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-only-data"</span>, {</span>
<span id="cb28-58"><a href="#cb28-58"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-only-data"</span>, <span class="at">height =</span> <span class="dv">1048</span>, <span class="at">width =</span> <span class="dv">1441</span>)</span>
<span id="cb28-59"><a href="#cb28-59"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"only-data.csv"</span>)</span>
<span id="cb28-60"><a href="#cb28-60"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb28-61"><a href="#cb28-61"></a>})</span>
<span id="cb28-62"><a href="#cb28-62"></a></span>
<span id="cb28-63"><a href="#cb28-63"></a></span>
<span id="cb28-64"><a href="#cb28-64"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: upload-consecutive-correct-files"</span>, {</span>
<span id="cb28-65"><a href="#cb28-65"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"upload-consecutive-correct-files"</span>, <span class="at">height =</span> <span class="dv">1048</span>, </span>
<span id="cb28-66"><a href="#cb28-66"></a>      <span class="at">width =</span> <span class="dv">1441</span>)</span>
<span id="cb28-67"><a href="#cb28-67"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"cols-and-data1.csv"</span>)</span>
<span id="cb28-68"><a href="#cb28-68"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb28-69"><a href="#cb28-69"></a>  app<span class="sc">$</span><span class="fu">upload_file</span>(<span class="at">csv_input =</span> <span class="st">"cols-and-data2.csv"</span>)</span>
<span id="cb28-70"><a href="#cb28-70"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"summary_table_output"</span>)</span>
<span id="cb28-71"><a href="#cb28-71"></a>})</span>
<span id="cb28-72"><a href="#cb28-72"></a></span>
<span id="cb28-73"><a href="#cb28-73"></a></span>
<span id="cb28-74"><a href="#cb28-74"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: select-three-spp"</span>, {</span>
<span id="cb28-75"><a href="#cb28-75"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"select-three-spp"</span>, <span class="at">height =</span> <span class="dv">1048</span>, <span class="at">width =</span> <span class="dv">1441</span>)</span>
<span id="cb28-76"><a href="#cb28-76"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"scatterplot_output"</span>)</span>
<span id="cb28-77"><a href="#cb28-77"></a>})</span>
<span id="cb28-78"><a href="#cb28-78"></a></span>
<span id="cb28-79"><a href="#cb28-79"></a></span>
<span id="cb28-80"><a href="#cb28-80"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: deselect-adelie"</span>, {</span>
<span id="cb28-81"><a href="#cb28-81"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"deselect-adelie"</span>, <span class="at">height =</span> <span class="dv">1048</span>, <span class="at">width =</span> <span class="dv">1441</span>)</span>
<span id="cb28-82"><a href="#cb28-82"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input_open =</span> <span class="cn">TRUE</span>, <span class="at">allow_no_input_binding_ =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-83"><a href="#cb28-83"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input =</span> <span class="fu">c</span>(<span class="st">"Chinstrap"</span>, <span class="st">"Gentoo"</span>))</span>
<span id="cb28-84"><a href="#cb28-84"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"scatterplot_output"</span>)</span>
<span id="cb28-85"><a href="#cb28-85"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input_open =</span> <span class="cn">FALSE</span>, <span class="at">allow_no_input_binding_ =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-86"><a href="#cb28-86"></a>})</span>
<span id="cb28-87"><a href="#cb28-87"></a></span>
<span id="cb28-88"><a href="#cb28-88"></a></span>
<span id="cb28-89"><a href="#cb28-89"></a><span class="fu">test_that</span>(<span class="st">"{shinytest2} recording: consecutive-spp-selections"</span>, {</span>
<span id="cb28-90"><a href="#cb28-90"></a>  app <span class="ot">&lt;-</span> AppDriver<span class="sc">$</span><span class="fu">new</span>(<span class="at">name =</span> <span class="st">"consecutive-spp-selections"</span>, <span class="at">height =</span> <span class="dv">1048</span>, <span class="at">width =</span> <span class="dv">1441</span>)</span>
<span id="cb28-91"><a href="#cb28-91"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input_open =</span> <span class="cn">TRUE</span>, <span class="at">allow_no_input_binding_ =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-92"><a href="#cb28-92"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input =</span> <span class="fu">character</span>(<span class="dv">0</span>))</span>
<span id="cb28-93"><a href="#cb28-93"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"scatterplot_output"</span>)</span>
<span id="cb28-94"><a href="#cb28-94"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input_open =</span> <span class="cn">FALSE</span>, <span class="at">allow_no_input_binding_ =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-95"><a href="#cb28-95"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input_open =</span> <span class="cn">TRUE</span>, <span class="at">allow_no_input_binding_ =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-96"><a href="#cb28-96"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input =</span> <span class="st">"Gentoo"</span>)</span>
<span id="cb28-97"><a href="#cb28-97"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"scatterplot_output"</span>)</span>
<span id="cb28-98"><a href="#cb28-98"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input_open =</span> <span class="cn">FALSE</span>, <span class="at">allow_no_input_binding_ =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-99"><a href="#cb28-99"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input_open =</span> <span class="cn">TRUE</span>, <span class="at">allow_no_input_binding_ =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-100"><a href="#cb28-100"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input =</span> <span class="fu">c</span>(<span class="st">"Adelie"</span>, <span class="st">"Chinstrap"</span>, <span class="st">"Gentoo"</span>))</span>
<span id="cb28-101"><a href="#cb28-101"></a>  app<span class="sc">$</span><span class="fu">expect_values</span>(<span class="at">output =</span> <span class="st">"scatterplot_output"</span>)</span>
<span id="cb28-102"><a href="#cb28-102"></a>  app<span class="sc">$</span><span class="fu">set_inputs</span>(<span class="at">penguinSpp_scatterplot_input_open =</span> <span class="cn">FALSE</span>, <span class="at">allow_no_input_binding_ =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-103"><a href="#cb28-103"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<!-- ##  {#testing-tips data-menu-title="Testing tips"} -->
<!-- [Tips for testing]{.slide-title} -->
<!-- <hr> -->
<!-- <p class="body-text topbr">[]{.teal-text} Record subsequent tests following the same workflow, giving each a unique name. Run `test_app("path/to/app")` to run all test scripts in your app's `tests/testhat/` directory.</p> -->
<!-- <p class="body-text">[]{.teal-text} **Use `record_test()` fairly often** -- Barret Schloerke argues that you should make a test recording for each feature of your app (many little recordings are encouraged!)</p> -->

<!-- <p class="body-text topbr">[]{.teal-text} **Limit testing to objects under your control.** For example, let's say you have a reactive data frame that you then send to a `DT::datatable` -- if package maintainers update the `DT` package, your output might change which could lead to false positive failed tests. Instead, test just your data frame that gets sent to `DT`.</p> -->
<!-- . . . -->
<!-- <br> -->
<!-- <center><p class="body-text-l teal-text">This is only a brief intro to `shinytest2`! Dig into the [documentation](https://rstudio.github.io/shinytest2/index.html) to learn more.</p></center> -->
</section>
<section id="end" class="slide level2" data-menu-title="~~~ BREAK ~~~" data-background="#047C90">
<h2></h2>
<div class="page-center vertical-center">
<p class="custom-subtitle bottombr">
End part 6.2
</p>
<p class="caption-text">
<em><strong>Up next:</strong> streamlining code</em>
</p>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_32f01b4e" data-update-every="1" tabindex="0" style="right:0;bottom:0;font-size:2em;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>

<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>